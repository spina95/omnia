<div class="relative w-full">
  <label *ngIf="label" class="block text-sm font-medium text-zinc-700 dark:text-slate-300 mb-2 transition-colors duration-200">
    {{ label }}
  </label>
  <div class="relative">
    <button
      type="button"
      (click)="toggleDropdown()"
      [ngClass]="[
        bgColor,
        'border',
        'border-zinc-300',
        'dark:border-sidebar-border',
        'text-zinc-900',
        'dark:text-white',
        'text-sm',
        'rounded-md',
        'px-4',
        'py-2.5',
        'h-10',
        'focus:outline-none',
        'focus:ring-2',
        'focus:ring-brand',
        'flex',
        'items-center',
        'justify-between',
        'hover:border-zinc-400',
        'dark:hover:border-sidebar-border/80',
        'transition-colors',
        'duration-200',
        'w-full'
      ]"
    >
      <span
        [class.text-zinc-400]="selectedValue === null"
        [class.dark:text-slate-400]="selectedValue === null"
        [class.text-zinc-900]="selectedValue !== null"
        [class.dark:text-white]="selectedValue !== null"
        class="transition-colors duration-200"
      >
        {{ getSelectedLabel() }}
      </span>
      <svg
        class="h-4 w-4 text-zinc-500 dark:text-slate-400 flex-shrink-0 ml-2 transition-all duration-200"
        [class.rotate-180]="isOpen"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
      </svg>
    </button>

    <div
      *ngIf="isOpen"
      (click)="$event.stopPropagation()"
      [style.position]="'fixed'"
      [style.width.px]="dropdownWidth"
      [style.top.px]="dropdownTop"
      [style.left.px]="dropdownLeft"
      class="z-[99999] mt-1 bg-white dark:bg-background border border-zinc-300 dark:border-sidebar-border rounded-md shadow-lg max-h-60 overflow-auto transition-colors duration-200"
    >
      <div class="p-1">
        <div
          *ngFor="let option of options"
          (click)="selectOption(option)"
          class="flex items-center px-3 py-2 rounded-md cursor-pointer hover:bg-brand-hover-100 dark:hover:bg-brand-hover transition-colors duration-200 text-sm text-zinc-900 dark:text-white"
          [class.bg-brand]="selectedValue === option.value"
        >
          <div class="flex flex-col">
            <span>{{ option.label }}</span>
            <span *ngIf="option.description" class="text-xs text-zinc-500 dark:text-slate-400 mt-0.5 transition-colors duration-200">{{ option.description }}</span>
          </div>
        </div>
        <div *ngIf="options.length === 0" class="px-3 py-2 text-sm text-zinc-500 dark:text-slate-400 text-center transition-colors duration-200">
          No options available
        </div>
      </div>
    </div>
  </div>
</div>

