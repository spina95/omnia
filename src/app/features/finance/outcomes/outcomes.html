<ng-template #headerActions>
  <button
    (click)="openManageTags()"
    class="flex items-center justify-center gap-2 px-2 sm:px-4 py-2.5 h-10 text-sm bg-zinc-800 text-white rounded-lg hover:bg-zinc-700 transition-colors border border-zinc-700"
  >
    <svg class="h-5 w-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
    </svg>
    <span class="hidden sm:inline whitespace-nowrap">Manage Tags</span>
  </button>
  <button
    (click)="onManageScheduledExpenses()"
    class="flex items-center justify-center gap-2 px-2 sm:px-4 py-2.5 h-10 text-sm bg-zinc-800 text-white rounded-lg hover:bg-zinc-700 transition-colors border border-zinc-700"
  >
    <svg class="h-5 w-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span class="hidden sm:inline whitespace-nowrap">Scheduled Expenses</span>
  </button>
  <button
    (click)="onAddOutcome()"
    class="flex items-center justify-center gap-2 px-2 sm:px-4 py-2.5 h-10 text-sm bg-brand text-black font-medium rounded-lg hover:bg-brand/90 transition-colors"
  >
    <svg class="h-5 w-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
    </svg>
    <span class="hidden sm:inline whitespace-nowrap">New Outcome</span>
  </button>
</ng-template>

<app-data-table [columnDefs]="columnDefs" [defaultColDef]="defaultColDef" [rowData]="rowData"
    [loading]="isLoading" [error]="errorMessage" [currentPage]="currentPage" [pageSize]="pageSize"
    [totalRecords]="totalRecords" [totalAmount]="totalAmount" [(searchValue)]="searchQuery" [(selectedMonth)]="selectedMonth"
    [(selectedYear)]="selectedYear" [(selectedCategory)]="selectedCategory"
    [(selectedPaymentType)]="selectedPaymentType" [(selectedTagIds)]="selectedTagIds" [categories]="categories" [paymentTypes]="paymentTypes"
    [tags]="tags" [months]="months" [years]="years" [showFilters]="true"
    emptyStateMessage="No outcomes found matching your criteria." (gridReady)="onGridReady()"
    (sortChanged)="onSortChanged($event)" (pageChanged)="onPageChanged($event)" (filterChanged)="onFilterChanged()"
    (cellClicked)="onCellClicked($event)"></app-data-table>

<!-- Expense Edit Dialog -->
<app-expense-dialog [expense]="selectedExpense" [isOpen]="isDialogOpen" (closeDialog)="onDialogClose()"
    (expenseSaved)="onExpenseSaved($event)"></app-expense-dialog>

<!-- Scheduled Expense Dialog -->
<app-scheduled-expense-dialog [isOpen]="isScheduledDialogOpen" (closeDialog)="onScheduledDialogClose()"
    (scheduledExpenseSaved)="onScheduledExpenseSaved($event)"></app-scheduled-expense-dialog>

<!-- Manage Tags Dialog -->
<app-manage-tags-dialog 
  [isOpen]="isManageTagsDialogOpen" 
  (closeDialog)="isManageTagsDialogOpen = false"
  (updated)="onTagsUpdated()">
</app-manage-tags-dialog>
