import{a as Me,b as Te}from"./chunk-X4WXVVJY.js";import{a as Se,d as Oe,g as ke,q as Ee}from"./chunk-6CP6HOOG.js";import{$a as k,Ba as j,Ca as ye,Db as J,Eb as G,F as ae,Fa as S,G as se,Gb as q,H as ie,K as oe,Kb as we,L as z,La as u,Lb as Ie,Ma as i,Na as r,Oa as v,Pa as xe,Q as L,R as B,S as P,Sa as K,T as Y,Ta as O,U as re,Ua as C,Y as le,Ya as be,Z as W,Za as fe,ab as M,ba as ce,bb as p,da as de,db as w,eb as Q,fb as Z,ga as pe,gb as U,hb as V,ib as ve,ka as me,oa as he,pa as l,qb as Ce,rb as x,sb as _e,ta as ge,tb as De,ua as ue,xa as F}from"./chunk-D4XNNWLR.js";import{a as N,b as R}from"./chunk-VOSPIT4N.js";var Re=["chart"],Ae=(()=>{class o{constructor(){this.chart=x(),this.annotations=x(),this.colors=x(),this.dataLabels=x(),this.series=x(),this.stroke=x(),this.labels=x(),this.legend=x(),this.markers=x(),this.noData=x(),this.parsing=x(),this.fill=x(),this.tooltip=x(),this.plotOptions=x(),this.responsive=x(),this.xaxis=x(),this.yaxis=x(),this.forecastDataPoints=x(),this.grid=x(),this.states=x(),this.title=x(),this.subtitle=x(),this.theme=x(),this.autoUpdateSeries=x(!0),this.chartReady=Ce(),this.chartInstance=ce(null),this.chartElement=_e.required("chart"),this.ngZone=z(W),this.isBrowser=we(z(me)),this._destroyed=!1,this._injector=z(re),this.waitingForConnectedRef=null}ngOnChanges(e){this.isBrowser&&this.hydrate(e)}ngOnDestroy(){this.destroy(),this._destroyed=!0}get isConnected(){return this.chartElement()?.nativeElement.isConnected}hydrate(e){if(this.waitingForConnectedRef)return;if(this.chartInstance()&&this.autoUpdateSeries()&&Object.keys(e).filter(s=>s!=="series").length===0){this.updateSeries(this.series(),!0);return}ue({read:()=>this.createElement()},{injector:this._injector})}async createElement(){let{default:e}=await import("./chunk-7U4PQD53.js");if(window.ApexCharts||=e,this._destroyed)return;if(!this.isConnected){this.waitForConnected();return}let n={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","parsing","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(m=>{let h=this[m]();h&&(n[m]=h)}),this.destroy();let a=this.ngZone.runOutsideAngular(()=>new e(this.chartElement().nativeElement,n));this.chartInstance.set(a),this.render(),this.chartReady.emit({chartObj:a})}render(){if(this.isConnected)return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render());this.waitForConnected()}updateOptions(e,n,s,a){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,n,s,a))}updateSeries(e,n){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,n))}appendSeries(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,n))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,n))}toggleDataPointSelection(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,n))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,n,s){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,n,s))}addYaxisAnnotation(e,n,s){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,n,s))}addPointAnnotation(e,n,s){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,n,s))}removeAnnotation(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,n))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}waitForConnected(){this.waitingForConnectedRef||(this.waitingForConnectedRef=ge({read:()=>{this.isConnected&&(this.waitingForConnectedRef.destroy(),this.waitingForConnectedRef=null,this.createElement())}},{injector:this._injector}))}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=j({type:o,selectors:[["apx-chart"]],viewQuery:function(n,s){n&1&&be(s.chartElement,Re,5),n&2&&fe()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],parsing:[1,"parsing"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[de],decls:2,vars:0,consts:[["chart",""]],template:function(n,s){n&1&&xe(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return o})();var Pe=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=ye({type:o})}static{this.\u0275inj=ie({})}}return o})();function He(o,t){if(o&1&&(i(0,"label",11),p(1),r()),o&2){let e=C();l(),w(" ",e.label," ")}}function Ze(o,t){if(o&1&&(i(0,"span",12),p(1),r()),o&2){let e=C();l(),w(" ",e.placeholder," ")}}function Ue(o,t){if(o&1&&v(0,"span",20),o&2){let e=C().$implicit;k("background",e.color)}}function Ve(o,t){if(o&1){let e=K();i(0,"span",15),S(1,Ue,1,2,"span",16),p(2),i(3,"button",17),O("click",function(s){let a=L(e).$implicit,m=C(2);return B(m.removeOption(a.id,s))}),P(),i(4,"svg",18),v(5,"path",19),r()()()}if(o&2){let e=t.$implicit;k("color",e.color||"#e2e8f0"),l(),u("ngIf",e.color),l(),w(" ",e.name," ")}}function $e(o,t){if(o&1&&(i(0,"span",13),S(1,Ve,6,4,"span",14),r()),o&2){let e=C();l(),u("ngForOf",e.getSelectedOptions())}}function ze(o,t){if(o&1&&(i(0,"span",21),p(1),r()),o&2){let e=C();l(),w(" ",e.selectedIds.length," selected ")}}function Ye(o,t){if(o&1&&v(0,"span",30),o&2){let e=C().$implicit;k("background",e.color)}}function We(o,t){if(o&1){let e=K();i(0,"div",26),O("click",function(){let s=L(e).$implicit,a=C(2);return B(a.toggleOption(s.id))}),i(1,"input",27),O("change",function(){let s=L(e).$implicit,a=C(2);return B(a.toggleOption(s.id))})("click",function(s){return L(e),B(s.stopPropagation())}),r(),i(2,"span",28),S(3,Ye,1,2,"span",29),i(4,"span",21),p(5),r()()()}if(o&2){let e=t.$implicit,n=C(2);l(),M("bg-brand",n.isSelected(e.id)),u("checked",n.isSelected(e.id)),l(2),u("ngIf",e.color),l(),k("color",e.color||"#e2e8f0"),l(),w(" ",e.name," ")}}function Ke(o,t){o&1&&(i(0,"div",31),p(1," No options available "),r())}function Qe(o,t){if(o&1){let e=K();i(0,"div",22),O("click",function(s){return L(e),B(s.stopPropagation())}),i(1,"div",23),S(2,We,6,7,"div",24)(3,Ke,2,0,"div",25),r()()}if(o&2){let e=C();l(2),u("ngForOf",e.options),l(),u("ngIf",e.options.length===0)}}var X=class o{constructor(t){this.elementRef=t}options=[];placeholder="Select options...";label="";selectionChange=new le;selectedIds=[];isOpen=!1;onChange=t=>{};onTouched=()=>{};ngOnInit(){this.selectedIds||(this.selectedIds=[])}writeValue(t){this.selectedIds=t?[...t]:[]}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}toggleOption(t){this.selectedIds.indexOf(t)>-1?this.selectedIds=this.selectedIds.filter(n=>n!==t):this.selectedIds=[...this.selectedIds,t],this.onChange([...this.selectedIds]),this.onTouched(),this.selectionChange.emit([...this.selectedIds])}isSelected(t){return this.selectedIds.includes(t)}getSelectedOptions(){return this.options.filter(t=>this.selectedIds.includes(t.id))}toggleDropdown(){this.isOpen=!this.isOpen,this.isOpen&&this.onTouched()}onDocumentClick(t){this.isOpen&&!this.elementRef.nativeElement.contains(t.target)&&(this.isOpen=!1)}closeDropdown(){this.isOpen=!1}removeOption(t,e){e.stopPropagation(),this.toggleOption(t)}getDisplayText(){return this.selectedIds.length===0?this.placeholder:this.selectedIds.length===1?this.options.find(e=>e.id===this.selectedIds[0])?.name||this.placeholder:`${this.selectedIds.length} selected`}static \u0275fac=function(e){return new(e||o)(F(pe))};static \u0275cmp=j({type:o,selectors:[["app-multiselect"]],hostBindings:function(e,n){e&1&&O("click",function(a){return n.onDocumentClick(a)},he)},inputs:{options:"options",placeholder:"placeholder",label:"label"},outputs:{selectionChange:"selectionChange"},features:[ve([{provide:Se,useExisting:ae(()=>o),multi:!0}])],decls:11,vars:7,consts:[[1,"relative","w-full"],["class","block text-sm font-medium text-slate-300 mb-2",4,"ngIf"],[1,"relative"],["type","button",1,"w-full","bg-dark-blue","border","border-sidebar-border","text-white","text-sm","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-brand","flex","items-center","justify-between","min-h-[42px]","hover:border-sidebar-border/80","transition-colors",3,"click"],[1,"flex","items-center","gap-2","flex-wrap","flex-1"],["class","text-slate-400",4,"ngIf"],["class","flex items-center gap-2 flex-wrap",4,"ngIf"],["class","text-slate-200",4,"ngIf"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4","text-slate-400","flex-shrink-0","ml-2","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","d","M19 9l-7 7-7-7"],["class","absolute z-50 w-full mt-1 bg-dark-blue border border-sidebar-border rounded-md shadow-lg max-h-60 overflow-auto",3,"click",4,"ngIf"],[1,"block","text-sm","font-medium","text-slate-300","mb-2"],[1,"text-slate-400"],[1,"flex","items-center","gap-2","flex-wrap"],["class","inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium bg-slate-800 border border-sidebar-border",3,"color",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","gap-1.5","px-2","py-1","rounded-md","text-xs","font-medium","bg-slate-800","border","border-sidebar-border"],["class","inline-block h-2 w-2 rounded-full",3,"background",4,"ngIf"],["type","button",1,"ml-1","hover:text-red-400","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"inline-block","h-2","w-2","rounded-full"],[1,"text-slate-200"],[1,"absolute","z-50","w-full","mt-1","bg-dark-blue","border","border-sidebar-border","rounded-md","shadow-lg","max-h-60","overflow-auto",3,"click"],[1,"p-1"],["class","flex items-center space-x-2 px-3 py-2 rounded-md cursor-pointer hover:bg-brand-hover transition-colors text-sm",3,"click",4,"ngFor","ngForOf"],["class","px-3 py-2 text-sm text-slate-400 text-center",4,"ngIf"],[1,"flex","items-center","space-x-2","px-3","py-2","rounded-md","cursor-pointer","hover:bg-brand-hover","transition-colors","text-sm",3,"click"],["type","checkbox",1,"rounded","border-sidebar-border","bg-slate-900","text-brand","focus:ring-brand","focus:ring-offset-0","focus:ring-offset-slate-900",3,"change","click","checked"],[1,"flex","items-center","space-x-2","flex-1"],["class","inline-block h-3 w-3 rounded-full flex-shrink-0",3,"background",4,"ngIf"],[1,"inline-block","h-3","w-3","rounded-full","flex-shrink-0"],[1,"px-3","py-2","text-sm","text-slate-400","text-center"]],template:function(e,n){e&1&&(i(0,"div",0),S(1,He,2,1,"label",1),i(2,"div",2)(3,"button",3),O("click",function(){return n.toggleDropdown()}),i(4,"div",4),S(5,Ze,2,1,"span",5)(6,$e,2,1,"span",6)(7,ze,2,1,"span",7),r(),P(),i(8,"svg",8),v(9,"path",9),r()(),S(10,Qe,4,2,"div",10),r()()),e&2&&(l(),u("ngIf",n.label),l(4),u("ngIf",n.selectedIds.length===0),l(),u("ngIf",n.selectedIds.length>0&&n.selectedIds.length<=2),l(),u("ngIf",n.selectedIds.length>2),l(),M("rotate-180",n.isOpen),l(2),u("ngIf",n.isOpen))},dependencies:[q,J,G],styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}div[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1e293b;border-radius:3px}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#475569;border-radius:3px}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}"]})};var ee=class o{constructor(t){this.supabase=t}async getDashboardStats(t){let e=new Date,n=e.getFullYear(),s=t?.startDate||`${n}-01-01`,a=t?.endDate||e.toISOString().slice(0,10);try{let m=this.supabase.client.from("incomes").select("amount").gte("date",s).lt("date",a);t?.paymentTypeIds?.length&&(m=m.in("paymentType_id",t.paymentTypeIds)),t?.incomeCategoryIds?.length&&(m=m.in("category_id",t.incomeCategoryIds));let{data:h}=await m,g=this.supabase.client.from("expenses").select("amount").gte("date",s).lt("date",a);t?.paymentTypeIds?.length&&(g=g.in("paymentType_id",t.paymentTypeIds)),t?.expenseCategoryIds?.length&&(g=g.in("category_id",t.expenseCategoryIds));let{data:d}=await g,c=h?.reduce((y,b)=>y+(b.amount||0),0)||0,f=d?.reduce((y,b)=>y+(b.amount||0),0)||0,_="";if(s&&a){let y=new Date(s),b=new Date(a),I=y.toLocaleDateString("en-US",{month:"short",year:"numeric"}),T=b.toLocaleDateString("en-US",{month:"short",year:"numeric"});_=`${I} - ${T}`}else _=`Year ${n}`;let E=c>0?(c-f)/c*100:0;return{totalIncomes:c,totalExpenses:f,balance:c-f,savingsPercentage:E,period:_}}catch(m){return console.error("Error fetching dashboard stats:",m),{totalIncomes:0,totalExpenses:0,balance:0,savingsPercentage:0,period:""}}}async getIncomesVsExpenses(t){let e=new Date,n=t?.startDate,s=t?.endDate||e.toISOString().slice(0,10);if(!n||!s)return[];try{let a=this.supabase.client.from("incomes").select("date, amount").gte("date",n).lt("date",s).order("date",{ascending:!0});t?.paymentTypeIds?.length&&(a=a.in("paymentType_id",t.paymentTypeIds)),t?.incomeCategoryIds?.length&&(a=a.in("category_id",t.incomeCategoryIds));let m=this.supabase.client.from("expenses").select("date, amount").gte("date",n).lt("date",s).order("date",{ascending:!0});t?.paymentTypeIds?.length&&(m=m.in("paymentType_id",t.paymentTypeIds)),t?.expenseCategoryIds?.length&&(m=m.in("category_id",t.expenseCategoryIds));let[h,g]=await Promise.all([a,m]),d={},c=new Date(n),f=new Date(s),_=new Date(c.getFullYear(),c.getMonth(),1),E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(;_<=f;){let y=`${E[_.getMonth()]} ${String(_.getFullYear()).slice(2)}`;d[y]||(d[y]={month:y,incomes:0,expenses:0}),_.setMonth(_.getMonth()+1)}return h.data?.forEach(y=>{let b=new Date(y.date),I=`${E[b.getMonth()]} ${String(b.getFullYear()).slice(2)}`;d[I]&&(d[I].incomes+=y.amount||0)}),g.data?.forEach(y=>{let b=new Date(y.date),I=`${E[b.getMonth()]} ${String(b.getFullYear()).slice(2)}`;d[I]&&(d[I].expenses+=y.amount||0)}),Object.keys(d).sort((y,b)=>{let I=this.parseMonthKey(y),T=this.parseMonthKey(b);return I.getTime()-T.getTime()}).map(y=>d[y])}catch(a){return console.error("Error fetching incomes vs expenses:",a),[]}}parseMonthKey(t){let[e,n]=t.split(" "),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(e),m=2e3+parseInt(n,10);return new Date(m,a,1)}async getExpensesByCategory(t){let e=new Date,n=t?.startDate,s=t?.endDate||e.toISOString().slice(0,10);if(!n||!s)return[];try{let a=this.supabase.client.from("expenses").select("amount, category_id, expense_categories(name, color)").gte("date",n).lt("date",s);t?.paymentTypeIds?.length&&(a=a.in("paymentType_id",t.paymentTypeIds)),t?.expenseCategoryIds?.length&&(a=a.in("category_id",t.expenseCategoryIds));let{data:m,error:h}=await a;if(h)throw h;let g={};return m?.forEach(d=>{let c=d.expense_categories;if(c){let f=c.name;g[f]||(g[f]={value:0,color:c.color||"#71717a"}),g[f].value+=d.amount||0}}),Object.entries(g).map(([d,c])=>({name:d,value:c.value,color:c.color}))}catch(a){return console.error("Error fetching expenses by category:",a),[]}}async getExpensesByAccount(t){let e=new Date,n=t?.startDate,s=t?.endDate||e.toISOString().slice(0,10);if(!n||!s)return[];try{let a=this.supabase.client.from("expenses").select("amount, paymentType_id, payment_types(name, color)").gte("date",n).lt("date",s);t?.paymentTypeIds?.length&&(a=a.in("paymentType_id",t.paymentTypeIds)),t?.expenseCategoryIds?.length&&(a=a.in("category_id",t.expenseCategoryIds));let{data:m,error:h}=await a;if(h)throw h;let g={};return m?.forEach(d=>{let c=d.payment_types;if(c){let f=c.name;g[f]||(g[f]={value:0,color:c.color||"#71717a"}),g[f].value+=d.amount||0}}),Object.entries(g).map(([d,c])=>({name:d,value:c.value,color:c.color}))}catch(a){return console.error("Error fetching expenses by account:",a),[]}}async getIncomesByAccount(t){let e=new Date,n=t?.startDate,s=t?.endDate||e.toISOString().slice(0,10);if(!n||!s)return[];try{let a=this.supabase.client.from("incomes").select("amount, paymentType_id, payment_types(name, color)").gte("date",n).lt("date",s);t?.paymentTypeIds?.length&&(a=a.in("paymentType_id",t.paymentTypeIds)),t?.incomeCategoryIds?.length&&(a=a.in("category_id",t.incomeCategoryIds));let{data:m,error:h}=await a;if(h)throw h;let g={};return m?.forEach(d=>{let c=d.payment_types;if(c){let f=c.name;g[f]||(g[f]={value:0,color:c.color||"#71717a"}),g[f].value+=d.amount||0}}),Object.entries(g).map(([d,c])=>({name:d,value:c.value,color:c.color}))}catch(a){return console.error("Error fetching incomes by account:",a),[]}}async getExpensesByCategoryPerMonth(t){let e=new Date,n=t?.startDate,s=t?.endDate||e.toISOString().slice(0,10);if(!n||!s)return{categories:[],series:[],months:[]};try{let a=this.supabase.client.from("expenses").select("amount, date, category_id, expense_categories(name, color)").gte("date",n).lt("date",s);t?.paymentTypeIds?.length&&(a=a.in("paymentType_id",t.paymentTypeIds)),t?.expenseCategoryIds?.length&&(a=a.in("category_id",t.expenseCategoryIds));let{data:m,error:h}=await a;if(h)throw h;let g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d={},c=new Date(n),f=new Date(s),_=new Date(c.getFullYear(),c.getMonth(),1),E=0;for(;_<=f;){let D=`${g[_.getMonth()]} ${String(_.getFullYear()).slice(2)}`;d[D]=E++,_.setMonth(_.getMonth()+1)}let y=Object.keys(d).sort((D,A)=>{let H=this.parseMonthKey(D),$=this.parseMonthKey(A);return H.getTime()-$.getTime()}),b={};m?.forEach(D=>{let A=D.expense_categories;if(A){let H=A.name,$=new Date(D.date),Ne=`${g[$.getMonth()]} ${String($.getFullYear()).slice(2)}`,ne=d[Ne];ne!==void 0&&(b[H]||(b[H]={values:new Array(y.length).fill(0),color:A.color||"#71717a"}),b[H].values[ne]+=D.amount||0)}});let I=Object.keys(b),T=I.map(D=>({name:D,data:b[D].values,color:b[D].color}));return{categories:I,series:T,months:y}}catch(a){return console.error("Error fetching expenses by category per month:",a),{categories:[],series:[],months:[]}}}async getFirstTransactionDate(){try{let[t,e]=await Promise.all([this.supabase.client.from("expenses").select("date").order("date",{ascending:!0}).limit(1).maybeSingle(),this.supabase.client.from("incomes").select("date").order("date",{ascending:!0}).limit(1).maybeSingle()]),n=t.data?.date,s=e.data?.date;return!n&&!s?null:n?s?n<s?n:s:n:s}catch(t){return console.error("Error getting first transaction date:",t),null}}async getTopExpenses(t){try{let e=new Date,n=t?.startDate,s=t?.endDate||e.toISOString().slice(0,10);if(!n||!s)return[];let a=this.supabase.client.from("expenses").select("id, name, amount, date, category_id, expense_categories(name, color)").gte("date",n).lt("date",s).order("amount",{ascending:!1}).limit(5);t?.paymentTypeIds?.length&&(a=a.in("paymentType_id",t.paymentTypeIds)),t?.expenseCategoryIds?.length&&(a=a.in("category_id",t.expenseCategoryIds));let{data:m}=await a;return(m||[]).map(h=>R(N({},h),{type:"expense",category:h.expense_categories?.name,color:h.expense_categories?.color}))}catch(e){return console.error("Error fetching top expenses:",e),[]}}async getRecentTransactions(t){try{let e=this.supabase.client.from("incomes").select("id, name, amount, date, category_id, income_categories(name)").order("date",{ascending:!1}).limit(3),n=this.supabase.client.from("expenses").select("id, name, amount, date, category_id, expense_categories(name)").order("date",{ascending:!1}).limit(3);t?.startDate&&(e=e.gte("date",t.startDate),n=n.gte("date",t.startDate)),t?.endDate&&(e=e.lt("date",t.endDate),n=n.lt("date",t.endDate)),t?.paymentTypeIds?.length&&(e=e.in("paymentType_id",t.paymentTypeIds),n=n.in("paymentType_id",t.paymentTypeIds)),t?.incomeCategoryIds?.length&&(e=e.in("category_id",t.incomeCategoryIds)),t?.expenseCategoryIds?.length&&(n=n.in("category_id",t.expenseCategoryIds));let[s,a]=await Promise.all([e,n]),m=(s.data||[]).map(d=>R(N({},d),{type:"income",category:d.income_categories?.name})),h=(a.data||[]).map(d=>R(N({},d),{type:"expense",category:d.expense_categories?.name})),g=[...m,...h];return g.sort((d,c)=>new Date(c.date).getTime()-new Date(d.date).getTime()),g.slice(0,5)}catch(e){return console.error("Error fetching recent transactions:",e),[]}}static \u0275fac=function(e){return new(e||o)(oe(Ie))};static \u0275prov=se({token:o,factory:o.\u0275fac,providedIn:"root"})};function Ge(o,t){o&1&&(i(0,"div",10)(1,"div",11),v(2,"div",12),i(3,"p",13),p(4,"Loading dashboard..."),r()()())}function qe(o,t){if(o&1&&(i(0,"div",49)(1,"div",50),p(2),v(3,"div",51),r()()),o&2){let e=t.$implicit,n=C(2);k("background",e.color||"#71717a")("width",n.stats.totalIncomes>0?e.value/n.stats.totalIncomes*100:0,"%"),l(2),Q(" ",e.name,": ",n.formatCurrency(e.value)," ")}}function Xe(o,t){if(o&1&&(i(0,"div",49)(1,"div",50),p(2),v(3,"div",51),r()()),o&2){let e=t.$implicit,n=C(2);k("background",e.color||"#71717a")("width",n.stats.totalExpenses>0?e.value/n.stats.totalExpenses*100:0,"%"),l(2),Q(" ",e.name,": ",n.formatCurrency(e.value)," ")}}function et(o,t){if(o&1&&v(0,"span",64),o&2){let e=C().$implicit;k("background",e.color)}}function tt(o,t){if(o&1&&(i(0,"tr",59)(1,"td",60),p(2),r(),i(3,"td",61),S(4,et,1,2,"span",62),p(5),r(),i(6,"td",61),p(7),r(),i(8,"td",63),p(9),r()()),o&2){let e=t.$implicit,n=C(3);l(2),w(" ",e.name," "),l(2),u("ngIf",e.color),l(),w(" ",e.category||"-"," "),l(2),w(" ",n.formatDate(e.date)," "),l(2),w(" -",n.formatCurrency(e.amount)," ")}}function nt(o,t){if(o&1&&(i(0,"div",40)(1,"div",41)(2,"h4",42),p(3,"Top 5 Highest Expenses"),r()(),i(4,"div",52)(5,"table",53)(6,"thead",54)(7,"tr")(8,"th",55),p(9," Description "),r(),i(10,"th",55),p(11," Category "),r(),i(12,"th",55),p(13," Date "),r(),i(14,"th",56),p(15," Amount "),r()()(),i(16,"tbody",57),S(17,tt,10,5,"tr",58),r()()()()),o&2){let e=C(2);l(17),u("ngForOf",e.topExpenses)}}function at(o,t){if(o&1&&(i(0,"div")(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",18),P(),i(6,"svg",19),v(7,"path",20),r()(),Y(),i(8,"div",21)(9,"dl")(10,"dt",22),p(11,"Total Incomes"),r(),i(12,"dd")(13,"div",23),p(14),r()()()()(),i(15,"div",24)(16,"div",25)(17,"span"),p(18,"Accounts"),r(),i(19,"span"),p(20),r()(),i(21,"div",26),S(22,qe,4,6,"div",27),r()()()(),i(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18),P(),i(27,"svg",28),v(28,"path",29),r()(),Y(),i(29,"div",21)(30,"dl")(31,"dt",22),p(32,"Total Expenses"),r(),i(33,"dd")(34,"div",30),p(35),r()()()()(),i(36,"div",24)(37,"div",25)(38,"span"),p(39,"Accounts"),r(),i(40,"span"),p(41),r()(),i(42,"div",26),S(43,Xe,4,6,"div",27),r()()()(),i(44,"div",15)(45,"div",16)(46,"div",17)(47,"div",18),P(),i(48,"svg",31),v(49,"path",32),r()(),Y(),i(50,"div",21)(51,"dl")(52,"dt",22),p(53,"Balance"),r(),i(54,"dd")(55,"div",33),p(56),r()()()()(),i(57,"div",24)(58,"div",34)(59,"div",35),p(60,"Savings Rate"),r(),i(61,"div",36),p(62),r()(),i(63,"div",37),v(64,"div",38),r()()()()(),S(65,nt,18,1,"div",39),i(66,"div",40)(67,"div",41)(68,"h4",42),p(69,"Incomes vs Expenses"),r()(),i(70,"div",16),v(71,"apx-chart",43),r()(),i(72,"div",40)(73,"div",41)(74,"h4",42),p(75,"Expenses by category"),r()(),i(76,"div",44),v(77,"apx-chart",45),r()(),i(78,"div",46)(79,"div",15)(80,"div",41)(81,"h4",47),p(82,"Expenses by category"),r()(),i(83,"div",16),v(84,"apx-chart",48),r()(),i(85,"div",15)(86,"div",41)(87,"h4",47),p(88,"Expenses by account"),r()(),i(89,"div",16),v(90,"apx-chart",48),r()(),i(91,"div",15)(92,"div",41)(93,"h4",47),p(94,"Incomes by account"),r()(),i(95,"div",16),v(96,"apx-chart",48),r()()()()),o&2){let e=C();l(14),w(" ",e.formatCurrency(e.stats.totalIncomes)," "),l(6),w("",e.incomesPaymentTypes.length," accounts"),l(2),u("ngForOf",e.incomesPaymentTypes),l(13),w(" ",e.formatCurrency(e.stats.totalExpenses)," "),l(6),w("",e.expensesPaymentTypes.length," accounts"),l(2),u("ngForOf",e.expensesPaymentTypes),l(5),M("text-brand",e.stats.balance>=0)("text-red-500",e.stats.balance<0),l(7),M("text-brand",e.stats.balance>=0)("text-red-500",e.stats.balance<0),l(),w(" ",e.formatCurrency(e.stats.balance)," "),l(5),M("text-brand",e.stats.savingsPercentage>=0)("text-red-500",e.stats.savingsPercentage<0),l(),Q(" ",e.stats.savingsPercentage>=0?"+":"","",e.stats.savingsPercentage.toFixed(1),"% "),l(2),k("width",e.Math.max(0,e.Math.min(100,e.stats.savingsPercentage)),"%"),M("bg-brand",e.stats.savingsPercentage>=0)("bg-red-500",e.stats.savingsPercentage<0),l(),u("ngIf",e.topExpenses.length>0),l(6),u("series",e.lineChartOptions.series)("chart",e.lineChartOptions.chart)("dataLabels",e.lineChartOptions.dataLabels)("stroke",e.lineChartOptions.stroke)("fill",e.lineChartOptions.fill)("xaxis",e.lineChartOptions.xaxis)("yaxis",e.lineChartOptions.yaxis)("grid",e.lineChartOptions.grid)("legend",e.lineChartOptions.legend)("tooltip",e.lineChartOptions.tooltip)("theme",e.lineChartOptions.theme),l(6),u("series",e.stackedBarChartOptions.series)("chart",e.stackedBarChartOptions.chart)("plotOptions",e.stackedBarChartOptions.plotOptions)("dataLabels",e.stackedBarChartOptions.dataLabels)("xaxis",e.stackedBarChartOptions.xaxis)("yaxis",e.stackedBarChartOptions.yaxis)("grid",e.stackedBarChartOptions.grid)("legend",e.stackedBarChartOptions.legend)("fill",e.stackedBarChartOptions.fill)("tooltip",e.stackedBarChartOptions.tooltip)("theme",e.stackedBarChartOptions.theme),l(7),u("series",e.expensesCategoryChartOptions.series)("chart",e.expensesCategoryChartOptions.chart)("labels",e.expensesCategoryChartOptions.labels)("colors",e.expensesCategoryChartOptions.colors)("dataLabels",e.expensesCategoryChartOptions.dataLabels)("plotOptions",e.expensesCategoryChartOptions.plotOptions)("legend",e.expensesCategoryChartOptions.legend)("tooltip",e.expensesCategoryChartOptions.tooltip)("theme",e.expensesCategoryChartOptions.theme)("states",e.expensesCategoryChartOptions.states)("stroke",e.expensesCategoryChartOptions.stroke),l(6),u("series",e.expensesAccountChartOptions.series)("chart",e.expensesAccountChartOptions.chart)("labels",e.expensesAccountChartOptions.labels)("colors",e.expensesAccountChartOptions.colors)("dataLabels",e.expensesAccountChartOptions.dataLabels)("plotOptions",e.expensesAccountChartOptions.plotOptions)("legend",e.expensesAccountChartOptions.legend)("tooltip",e.expensesAccountChartOptions.tooltip)("theme",e.expensesAccountChartOptions.theme)("states",e.expensesAccountChartOptions.states)("stroke",e.expensesCategoryChartOptions.stroke),l(6),u("series",e.incomesAccountChartOptions.series)("chart",e.incomesAccountChartOptions.chart)("labels",e.incomesAccountChartOptions.labels)("colors",e.incomesAccountChartOptions.colors)("dataLabels",e.incomesAccountChartOptions.dataLabels)("plotOptions",e.incomesAccountChartOptions.plotOptions)("legend",e.incomesAccountChartOptions.legend)("tooltip",e.incomesAccountChartOptions.tooltip)("theme",e.incomesAccountChartOptions.theme)("states",e.incomesAccountChartOptions.states)("stroke",e.expensesCategoryChartOptions.stroke)}}var Fe=class o{constructor(t,e,n,s){this.dashboardService=t;this.financeService=e;this.ngZone=n;this.cdr=s;this.initializeChartDefaults()}isLoading=!0;stats={totalIncomes:0,totalExpenses:0,balance:0,savingsPercentage:0,period:""};topExpenses=[];incomesPaymentTypes=[];expensesPaymentTypes=[];lineChartOptions;stackedBarChartOptions;expensesCategoryChartOptions;expensesAccountChartOptions;incomesAccountChartOptions;selectedPeriod="last-12-months";selectedPaymentTypes=[];selectedExpenseCategories=[];selectedIncomeCategories=[];paymentTypes=[];expenseCategories=[];incomeCategories=[];periodOptions=[{value:"this-month",label:"This month"},{value:"last-6-months",label:"Last 6 months"},{value:"last-12-months",label:"Last 12 months"},{value:"all",label:"All"}];Math=Math;instanceId=Math.random().toString(16).slice(2,8);async ngOnInit(){await this.loadFilterOptions(),await this.loadDashboardData()}async loadFilterOptions(){try{let[t,e,n]=await Promise.all([this.financeService.getPaymentTypes(),this.financeService.getCategories(),this.financeService.getIncomeCategories()]);this.paymentTypes=t||[],this.expenseCategories=e||[],this.incomeCategories=n||[]}catch(t){console.error("Error loading filter options",t)}}async calculateDateRange(){let t=new Date,e=t.toISOString().slice(0,10),s=new Date(t.getFullYear(),t.getMonth()+1,1).toISOString().slice(0,10);switch(this.selectedPeriod){case"this-month":return{startDate:new Date(t.getFullYear(),t.getMonth(),1).toISOString().slice(0,10),endDate:s};case"last-6-months":return{startDate:new Date(t.getFullYear(),t.getMonth()-5,1).toISOString().slice(0,10),endDate:s};case"last-12-months":return{startDate:new Date(t.getFullYear(),t.getMonth()-11,1).toISOString().slice(0,10),endDate:s};case"all":default:return{startDate:await this.getFirstTransactionDate()||void 0,endDate:s}}}async getFirstTransactionDate(){return await this.dashboardService.getFirstTransactionDate()}async buildFilters(){let{startDate:t,endDate:e}=await this.calculateDateRange();return{startDate:t,endDate:e,paymentTypeIds:this.selectedPaymentTypes,expenseCategoryIds:this.selectedExpenseCategories,incomeCategoryIds:this.selectedIncomeCategories}}async onPeriodChange(t){this.selectedPeriod=t,await this.loadDashboardData()}async onPaymentTypesChange(t){this.selectedPaymentTypes=t.map(e=>Number(e)),await this.loadDashboardData()}async onExpenseCategoriesChange(t){this.selectedExpenseCategories=t.map(e=>Number(e)),await this.loadDashboardData()}async onIncomeCategoriesChange(t){this.selectedIncomeCategories=t.map(e=>Number(e)),await this.loadDashboardData()}initializeChartDefaults(){this.lineChartOptions=this.createLineChartOptions([],[]),this.stackedBarChartOptions=this.createStackedBarOptions([],[]),this.expensesCategoryChartOptions=this.createPieChartOptions([],"Expenses by category"),this.expensesAccountChartOptions=this.createPieChartOptions([],"Expenses by account"),this.incomesAccountChartOptions=this.createPieChartOptions([],"Incomes by account")}async loadDashboardData(){this.isLoading=!0,console.info("[HomeComponent] loadDashboardData: start");try{let t=await this.buildFilters(),e=await Promise.allSettled([this.dashboardService.getDashboardStats(t),this.dashboardService.getIncomesVsExpenses(t),this.dashboardService.getExpensesByCategory(t),this.dashboardService.getExpensesByCategoryPerMonth(t),this.dashboardService.getExpensesByAccount(t),this.dashboardService.getIncomesByAccount(t),this.dashboardService.getTopExpenses(t)]),[n,s,a,m,h,g,d]=e,c=(D,A)=>D.status==="fulfilled"?D.value:(console.warn("[HomeComponent] dashboard load item failed",D.reason),A),f=c(n,{totalIncomes:0,totalExpenses:0,balance:0,savingsPercentage:0,period:""}),_=c(s,[]),E=c(a,[]),y=c(m,{categories:[],series:[],months:[]}),b=c(h,[]),I=c(g,[]),T=c(d,[]);this.ngZone.run(()=>{this.stats=f,this.topExpenses=T,this.expensesPaymentTypes=b,this.incomesPaymentTypes=I,this.lineChartOptions=this.createLineChartOptions(_,_.map(D=>D.month)),this.stackedBarChartOptions=this.createStackedBarOptions(y.series,y.months),this.expensesCategoryChartOptions=this.createPieChartOptions(E,"Expenses by category"),this.expensesAccountChartOptions=this.createPieChartOptions(b,"Expenses by account"),this.incomesAccountChartOptions=this.createPieChartOptions(I,"Incomes by account"),this.cdr.detectChanges()})}catch(t){console.error("Error loading dashboard data:",t)}finally{this.ngZone.run(()=>{this.isLoading=!1,this.cdr.detectChanges()}),console.info("[HomeComponent] loadDashboardData: end")}}createLineChartOptions(t,e){let n=t.map(a=>a.incomes||0),s=t.map(a=>a.expenses||0);return{series:[{name:"Incomes",data:n,color:"#3ECF8E"},{name:"Expenses",data:s,color:"#ef4444"}],chart:{type:"area",height:350,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,90,100]}},xaxis:{categories:e,labels:{style:{colors:"#a1a1aa",fontSize:"12px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#a1a1aa",fontSize:"12px"},formatter:a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}},grid:{borderColor:"#2a2a2a",strokeDashArray:4,xaxis:{lines:{show:!1}}},legend:{position:"top",horizontalAlign:"right",labels:{colors:"#e4e4e7"},markers:{size:6}},tooltip:{theme:"dark",y:{formatter:a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(a)}},theme:{mode:"dark"}}}createStackedBarOptions(t,e){return{series:t.map(s=>R(N({},s),{data:s.data.map(a=>a),color:s.color})),chart:{type:"bar",height:400,stacked:!0,background:"transparent",toolbar:{show:!1},foreColor:"#a1a1aa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4,dataLabels:{position:"top"}}},fill:{opacity:.5},dataLabels:{enabled:!1},xaxis:{categories:e,labels:{style:{colors:"#a1a1aa",fontSize:"12px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#a1a1aa",fontSize:"12px"},formatter:s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}},grid:{borderColor:"#2a2a2a",strokeDashArray:4,xaxis:{lines:{show:!1}}},legend:{position:"top",horizontalAlign:"left",labels:{colors:"#e4e4e7"},markers:{width:10,height:10,radius:5,shape:"circle"}},tooltip:{theme:"dark",y:{formatter:s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(s)}},theme:{mode:"dark"}}}hexToRgba(t,e){let n=t.replace("#",""),s=parseInt(n.substring(0,2),16),a=parseInt(n.substring(2,4),16),m=parseInt(n.substring(4,6),16);return`rgba(${s}, ${a}, ${m}, ${e})`}createPieChartOptions(t,e){let n=t.map(h=>h.value),s=t.map(h=>h.name),a=t.map(h=>h.color),m=a.length>0?a.map(h=>this.hexToRgba(h,.5)):[this.hexToRgba("#71717a",.5)];return{series:n.length>0?n:[1],chart:{type:"donut",height:320,background:"transparent"},labels:s.length>0?s:["No data"],colors:m,dataLabels:{enabled:!1},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,label:"Total",fontSize:"14px",color:"#a1a1aa",formatter:h=>{let g=h.globals.seriesTotals.reduce((d,c)=>d+c,0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g)}},value:{show:!0,fontSize:"20px",color:"#e4e4e7",fontWeight:600}}}}},stroke:{show:!1,width:0,colors:["transparent"]},legend:{position:"bottom",labels:{colors:"#e4e4e7"},markers:{size:6}},tooltip:{theme:"dark",y:{formatter:h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(h)}},theme:{mode:"dark"},states:{hover:{filter:{type:"lighten",value:.1}}}}}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}static \u0275fac=function(e){return new(e||o)(F(ee),F(Te),F(W),F(De))};static \u0275cmp=j({type:o,selectors:[["app-home"]],decls:18,vars:19,consts:[[1,"space-y-6","p-6"],[1,"border-b","border-sidebar-border","pb-5"],[1,"text-2xl","font-semibold","leading-6","text-white"],[1,"mt-2","max-w-4xl","text-sm","text-slate-400"],[1,"bg-background-card","border","border-sidebar-border","rounded-lg","p-4","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["bgColor","bg-dark-blue",3,"ngModelChange","selectionChange","options","label","placeholder","ngModel"],[3,"ngModelChange","selectionChange","options","label","placeholder","ngModel"],["class","flex items-center justify-center py-12",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"text-center"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-brand"],[1,"mt-2","text-sm","text-slate-400"],[1,"grid","grid-cols-1","gap-5","sm:grid-cols-2","lg:grid-cols-3","mb-6"],[1,"overflow-hidden","rounded-lg","bg-background-card","shadow","border","border-sidebar-border"],[1,"p-5"],[1,"flex","items-center"],[1,"flex-shrink-0"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-brand"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 11l5-5m0 0l5 5m-5-5v12"],[1,"ml-5","w-0","flex-1"],[1,"truncate","text-sm","font-medium","text-slate-400"],[1,"text-lg","font-semibold","text-brand"],[1,"mt-4","pt-4","border-t","border-sidebar-border"],[1,"flex","items-center","justify-between","text-sm","text-slate-400","mb-2"],[1,"flex","items-center","space-x-1","relative"],["class","flex-1 h-2 rounded-full relative group",3,"background","width",4,"ngFor","ngForOf"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 13l-5 5m0 0l-5-5m5 5V6"],[1,"text-lg","font-semibold","text-red-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-semibold"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-slate-400"],[1,"text-sm","font-semibold"],[1,"mt-2","w-full","bg-slate-700","rounded-full","h-2"],[1,"h-2","rounded-full"],["class","mb-6 overflow-hidden rounded-lg bg-background-card shadow border border-sidebar-border",4,"ngIf"],[1,"mb-6","overflow-hidden","rounded-lg","bg-background-card","shadow","border","border-sidebar-border"],[1,"px-5","py-4","border-b","border-sidebar-border"],[1,"text-base","font-semibold","text-white"],[3,"series","chart","dataLabels","stroke","fill","xaxis","yaxis","grid","legend","tooltip","theme"],[1,"p-5","stacked-bar-chart-container"],[3,"series","chart","plotOptions","dataLabels","xaxis","yaxis","grid","legend","fill","tooltip","theme"],[1,"grid","grid-cols-1","gap-5","lg:grid-cols-3"],[1,"text-sm","font-semibold","text-white"],[3,"series","chart","labels","colors","dataLabels","plotOptions","legend","tooltip","theme","states","stroke"],[1,"flex-1","h-2","rounded-full","relative","group"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-2","px-2","py-1","bg-slate-800","text-white","text-xs","rounded","opacity-0","group-hover:opacity-100","transition-opacity","whitespace-nowrap","z-10"],[1,"absolute","top-full","left-1/2","transform","-translate-x-1/2","w-0","h-0","border-l-4","border-r-4","border-t-4","border-transparent","border-t-slate-800"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-sidebar-border"],[1,""],["scope","col",1,"px-5","py-3","text-left","text-xs","font-medium","text-slate-400","uppercase","tracking-wider"],["scope","col",1,"px-5","py-3","text-right","text-xs","font-medium","text-slate-400","uppercase","tracking-wider"],[1,"divide-y","divide-sidebar-border"],["class","hover:bg-slate-900/30",4,"ngFor","ngForOf"],[1,"hover:bg-slate-900/30"],[1,"px-5","py-4","whitespace-nowrap","text-sm","font-medium","text-white"],[1,"px-5","py-4","whitespace-nowrap","text-sm","text-slate-400"],["class","inline-block h-3 w-3 rounded-full mr-2",3,"background",4,"ngIf"],[1,"px-5","py-4","whitespace-nowrap","text-sm","text-right","font-semibold","text-red-500"],[1,"inline-block","h-3","w-3","rounded-full","mr-2"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h3",2),p(3,"Dashboard"),r(),i(4,"p",3),p(5),r()(),i(6,"div",4)(7,"div",5)(8,"div")(9,"app-select",6),V("ngModelChange",function(a){return U(n.selectedPeriod,a)||(n.selectedPeriod=a),a}),O("selectionChange",function(a){return n.onPeriodChange(a)}),r()(),i(10,"div")(11,"app-multiselect",7),V("ngModelChange",function(a){return U(n.selectedPaymentTypes,a)||(n.selectedPaymentTypes=a),a}),O("selectionChange",function(a){return n.onPaymentTypesChange(a)}),r()(),i(12,"div")(13,"app-multiselect",7),V("ngModelChange",function(a){return U(n.selectedExpenseCategories,a)||(n.selectedExpenseCategories=a),a}),O("selectionChange",function(a){return n.onExpenseCategoriesChange(a)}),r()(),i(14,"div")(15,"app-multiselect",7),V("ngModelChange",function(a){return U(n.selectedIncomeCategories,a)||(n.selectedIncomeCategories=a),a}),O("selectionChange",function(a){return n.onIncomeCategoriesChange(a)}),r()()()(),S(16,Ge,5,0,"div",8)(17,at,97,83,"div",9),r()),e&2&&(l(5),w("Financial overview for ",n.stats.period),l(4),u("options",n.periodOptions)("label","Period")("placeholder","Select period..."),Z("ngModel",n.selectedPeriod),l(2),u("options",n.paymentTypes)("label","Accounts")("placeholder","Select accounts..."),Z("ngModel",n.selectedPaymentTypes),l(2),u("options",n.expenseCategories)("label","Expense categories")("placeholder","Select categories..."),Z("ngModel",n.selectedExpenseCategories),l(2),u("options",n.incomeCategories)("label","Income categories")("placeholder","Select income categories..."),Z("ngModel",n.selectedIncomeCategories),l(),u("ngIf",n.isLoading),l(),u("ngIf",!n.isLoading))},dependencies:[q,J,G,Pe,Ae,X,Me,Ee,Oe,ke],styles:["[_nghost-%COMP%]{display:block}"]})};export{Fe as HomeComponent};
