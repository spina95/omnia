import{a as V}from"./chunk-IURNE76V.js";import{Ba as M,F as w,Fa as y,Ja as a,Pa as r,Qa as l,R as f,Ra as s,S as g,Sa as h,T as v,Wb as T,Xb as E,Z as k,Za as b,_a as m,ab as c,cc as P,ia as I,kb as _,lb as C,nb as u,pb as x,sa as O,ta as o,vb as S}from"./chunk-XVI4XSAG.js";function R(n,t){if(n&1&&(l(0,"label",11),u(1),s()),n&2){let e=c();o(),x(" ",e.label," ")}}function $(n,t){if(n&1&&(l(0,"span",12),u(1),s()),n&2){let e=c();o(),x(" ",e.placeholder," ")}}function B(n,t){if(n&1&&h(0,"span",20),n&2){let e=c().$implicit;_("background",e.color)}}function L(n,t){if(n&1){let e=b();l(0,"span",15),a(1,B,1,2,"span",16),u(2),l(3,"button",17),m("click",function(d){let p=f(e).$implicit,F=c(2);return g(F.removeOption(p.id,d))}),v(),l(4,"svg",18),h(5,"path",19),s()()()}if(n&2){let e=t.$implicit;_("color",e.color||"#e2e8f0"),o(),r("ngIf",e.color),o(),x(" ",e.name," ")}}function N(n,t){if(n&1&&(l(0,"span",13),a(1,L,6,4,"span",14),s()),n&2){let e=c();o(),r("ngForOf",e.getSelectedOptions())}}function j(n,t){if(n&1&&(l(0,"span",21),u(1),s()),n&2){let e=c();o(),x(" ",e.selectedIds.length," selected ")}}function A(n,t){if(n&1&&h(0,"span",30),n&2){let e=c().$implicit;_("background",e.color)}}function H(n,t){if(n&1){let e=b();l(0,"div",26),m("click",function(){let d=f(e).$implicit,p=c(2);return g(p.toggleOption(d.id))}),l(1,"input",27),m("change",function(){let d=f(e).$implicit,p=c(2);return g(p.toggleOption(d.id))})("click",function(d){return f(e),g(d.stopPropagation())}),s(),l(2,"span",28),a(3,A,1,2,"span",29),l(4,"span",21),u(5),s()()()}if(n&2){let e=t.$implicit,i=c(2);o(),C("bg-brand",i.isSelected(e.id)),r("checked",i.isSelected(e.id)),o(2),r("ngIf",e.color),o(),_("color",e.color||"#e2e8f0"),o(),x(" ",e.name," ")}}function G(n,t){n&1&&(l(0,"div",31),u(1," No options available "),s())}function W(n,t){if(n&1){let e=b();l(0,"div",22),m("click",function(d){return f(e),g(d.stopPropagation())}),l(1,"div",23),a(2,H,6,7,"div",24)(3,G,2,0,"div",25),s()()}if(n&2){let e=c();_("position","fixed")("width",e.dropdownWidth,"px")("top",e.dropdownTop,"px")("left",e.dropdownLeft,"px"),o(2),r("ngForOf",e.options),o(),r("ngIf",e.options.length===0)}}var D=class n{constructor(t){this.elementRef=t}options=[];placeholder="Select options...";label="";selectionChange=new k;selectedIds=[];isOpen=!1;dropdownWidth=0;dropdownTop=0;dropdownLeft=0;onChange=t=>{};onTouched=()=>{};ngOnInit(){this.selectedIds||(this.selectedIds=[])}writeValue(t){this.selectedIds=t?[...t]:[]}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}toggleOption(t){this.selectedIds.indexOf(t)>-1?this.selectedIds=this.selectedIds.filter(i=>i!==t):this.selectedIds=[...this.selectedIds,t],this.onChange([...this.selectedIds]),this.onTouched(),this.selectionChange.emit([...this.selectedIds])}isSelected(t){return this.selectedIds.includes(t)}getSelectedOptions(){return this.options.filter(t=>this.selectedIds.includes(t.id))}toggleDropdown(){this.isOpen=!this.isOpen,this.isOpen&&(this.calculateDropdownPosition(),this.onTouched())}calculateDropdownPosition(){let t=this.elementRef.nativeElement.querySelector("button");if(t){let e=t.getBoundingClientRect();this.dropdownWidth=e.width,this.dropdownTop=e.bottom+4,this.dropdownLeft=e.left}}onDocumentClick(t){this.isOpen&&!this.elementRef.nativeElement.contains(t.target)&&(this.isOpen=!1)}closeDropdown(){this.isOpen=!1}removeOption(t,e){e.stopPropagation(),this.toggleOption(t)}getDisplayText(){return this.selectedIds.length===0?this.placeholder:this.selectedIds.length===1?this.options.find(e=>e.id===this.selectedIds[0])?.name||this.placeholder:`${this.selectedIds.length} selected`}static \u0275fac=function(e){return new(e||n)(M(I))};static \u0275cmp=y({type:n,selectors:[["app-multiselect"]],hostBindings:function(e,i){e&1&&m("click",function(p){return i.onDocumentClick(p)},O)},inputs:{options:"options",placeholder:"placeholder",label:"label"},outputs:{selectionChange:"selectionChange"},features:[S([{provide:V,useExisting:w(()=>n),multi:!0}])],decls:11,vars:7,consts:[[1,"relative","w-full"],["class","block text-sm font-medium text-slate-300 mb-2",4,"ngIf"],[1,"relative"],["type","button",1,"w-full","bg-dark-blue","border","border-sidebar-border","text-white","text-sm","rounded-md","px-4","py-2.5","h-10","focus:outline-none","focus:ring-2","focus:ring-brand","flex","items-center","justify-between","hover:border-sidebar-border/80","transition-colors",3,"click"],[1,"flex","items-center","gap-2","flex-wrap","flex-1"],["class","text-slate-400",4,"ngIf"],["class","flex items-center gap-2 flex-wrap",4,"ngIf"],["class","text-slate-200",4,"ngIf"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4","text-slate-400","flex-shrink-0","ml-2","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","d","M19 9l-7 7-7-7"],["class","z-[99999] mt-1 bg-dark-blue border border-sidebar-border rounded-md shadow-lg max-h-60 overflow-auto",3,"position","width","top","left","click",4,"ngIf"],[1,"block","text-sm","font-medium","text-slate-300","mb-2"],[1,"text-slate-400"],[1,"flex","items-center","gap-2","flex-wrap"],["class","inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium bg-slate-800 border border-sidebar-border",3,"color",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","gap-1.5","px-2","py-1","rounded-md","text-xs","font-medium","bg-slate-800","border","border-sidebar-border"],["class","inline-block h-2 w-2 rounded-full",3,"background",4,"ngIf"],["type","button",1,"ml-1","hover:text-red-400","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"inline-block","h-2","w-2","rounded-full"],[1,"text-slate-200"],[1,"z-[99999]","mt-1","bg-dark-blue","border","border-sidebar-border","rounded-md","shadow-lg","max-h-60","overflow-auto",3,"click"],[1,"p-1"],["class","flex items-center space-x-2 px-3 py-2 rounded-md cursor-pointer hover:bg-brand-hover transition-colors text-sm",3,"click",4,"ngFor","ngForOf"],["class","px-3 py-2 text-sm text-slate-400 text-center",4,"ngIf"],[1,"flex","items-center","space-x-2","px-3","py-2","rounded-md","cursor-pointer","hover:bg-brand-hover","transition-colors","text-sm",3,"click"],["type","checkbox",1,"rounded","border-sidebar-border","bg-slate-900","text-brand","focus:ring-brand","focus:ring-offset-0","focus:ring-offset-slate-900",3,"change","click","checked"],[1,"flex","items-center","space-x-2","flex-1"],["class","inline-block h-3 w-3 rounded-full flex-shrink-0",3,"background",4,"ngIf"],[1,"inline-block","h-3","w-3","rounded-full","flex-shrink-0"],[1,"px-3","py-2","text-sm","text-slate-400","text-center"]],template:function(e,i){e&1&&(l(0,"div",0),a(1,R,2,1,"label",1),l(2,"div",2)(3,"button",3),m("click",function(){return i.toggleDropdown()}),l(4,"div",4),a(5,$,2,1,"span",5)(6,N,2,1,"span",6)(7,j,2,1,"span",7),s(),v(),l(8,"svg",8),h(9,"path",9),s()(),a(10,W,4,10,"div",10),s()()),e&2&&(o(),r("ngIf",i.label),o(4),r("ngIf",i.selectedIds.length===0),o(),r("ngIf",i.selectedIds.length>0&&i.selectedIds.length<=2),o(),r("ngIf",i.selectedIds.length>2),o(),C("rotate-180",i.isOpen),o(2),r("ngIf",i.isOpen))},dependencies:[P,T,E],styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}div[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1e293b;border-radius:3px}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#475569;border-radius:3px}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}"]})};export{D as a};
