import{a as ce}from"./chunk-2ZC4CSOT.js";import{a as ge}from"./chunk-PIY2XGWN.js";import"./chunk-MWBQVVND.js";import{a as B}from"./chunk-ZB4FMHFC.js";import{a as j,b as me}from"./chunk-425RWJ2X.js";import{a as V}from"./chunk-37BRICHQ.js";import{a as de}from"./chunk-SOJVCRDF.js";import{a as pe}from"./chunk-SWEM3K6L.js";import{b as W,d as A,e as ie,f as ae,g as L,h as oe,i as re,o as le,p as se,r as k}from"./chunk-XYDAMM6N.js";import{Ab as h,Bb as y,Gb as I,Ha as S,Hb as K,Ib as X,Jb as Z,Kb as $,La as E,Pa as f,Q as G,Rb as P,Va as g,W as c,Wa as a,X as p,Xa as o,Y as b,Ya as v,Z as T,ca as D,cc as N,db as w,dc as F,eb as _,gb as m,gc as ee,hc as te,jc as ne,ka as Y,kb as Q,kc as M,lb as U,mb as J,qb as O,ub as d,vb as z,wb as C,ya as s,zb as x}from"./chunk-TKY7A7V6.js";import{a as q}from"./chunk-VOSPIT4N.js";function ve(l,n){if(l&1&&(a(0,"div",15),d(1),o()),l&2){let e=m(2);s(),C(" ",e.errorMessage," ")}}function Ce(l,n){l&1&&(a(0,"div",16),v(1,"div",17),o())}function be(l,n){if(l&1&&(a(0,"div",15),d(1),o()),l&2){let e=m(3);s(),C(" ",e.formErrorMessage," ")}}function we(l,n){if(l&1){let e=w();a(0,"button",48),_("click",function(){c(e);let i=m(3);return p(i.cancelEdit())}),d(1," Cancel Edit "),o()}}function Se(l,n){l&1&&v(0,"span",49)}function Te(l,n){if(l&1&&(a(0,"span",60),d(1),o()),l&2){let e=m().$implicit,t=m(3);O("background-color",t.getCategoryColor(e.expense_categories.id)+"33")("color",t.getCategoryColor(e.expense_categories.id))("border-color",t.getCategoryColor(e.expense_categories.id)+"4d"),s(),C(" ",e.expense_categories.name," ")}}function De(l,n){l&1&&(a(0,"span",61),d(1,"No category"),o())}function Ee(l,n){if(l&1&&(a(0,"span",60),d(1),o()),l&2){let e=m().$implicit,t=m(3);O("background-color",t.getPaymentTypeColor(e.payment_types.id)+"33")("color",t.getPaymentTypeColor(e.payment_types.id))("border-color",t.getPaymentTypeColor(e.payment_types.id)+"4d"),s(),C(" ",e.payment_types.name," ")}}function Me(l,n){l&1&&(a(0,"span",61),d(1,"No account"),o())}function ke(l,n){if(l&1){let e=w();a(0,"tr",50)(1,"td",51),d(2),o(),a(3,"td",52),d(4),I(5,"currency"),o(),a(6,"td",52),d(7),I(8,"date"),o(),a(9,"td",52)(10,"span",53),d(11),I(12,"titlecase"),o()(),a(13,"td",54),f(14,Te,2,7,"span",55)(15,De,2,0,"span",56),o(),a(16,"td",54),f(17,Ee,2,7,"span",55)(18,Me,2,0,"span",56),o(),a(19,"td",57)(20,"button",58),_("click",function(){let i=c(e).$implicit,r=m(3);return p(r.editScheduledExpense(i))}),d(21," Edit "),o(),a(22,"button",59),_("click",function(){let i=c(e).$implicit,r=m(3);return p(r.deleteScheduledExpense(i))}),d(23," Delete "),o()()()}if(l&2){let e=n.$implicit;s(2),z(e.name),s(2),C(" ",Z(5,8,e.amount,"EUR","symbol","1.2-2")," "),s(3),C(" ",X(8,13,e.next_run,"dd/MM/yyyy")," "),s(4),C(" ",K(12,16,e.repeat_interval)," "),s(3),g("ngIf",e.expense_categories),s(),g("ngIf",!e.expense_categories),s(2),g("ngIf",e.payment_types),s(),g("ngIf",!e.payment_types)}}function Ve(l,n){l&1&&(a(0,"tr")(1,"td",62)(2,"div",63),d(3,"No scheduled expenses found."),o(),a(4,"div",64),d(5,"Create your first scheduled expense above."),o()()())}function Oe(l,n){if(l&1){let e=w();a(0,"div",18)(1,"div",19)(2,"h3",20),d(3),o(),f(4,be,2,1,"div",12),a(5,"form",21)(6,"div",22)(7,"label",23),d(8," Name "),a(9,"span",24),d(10,"*"),o()(),a(11,"input",25),y("ngModelChange",function(i){c(e);let r=m(2);return h(r.formData.name,i)||(r.formData.name=i),p(i)}),o()(),a(12,"div")(13,"label",23),d(14," Amount (\u20AC) "),a(15,"span",24),d(16,"*"),o()(),a(17,"div",26)(18,"span",27),d(19,"\u20AC"),o(),a(20,"input",28),y("ngModelChange",function(i){c(e);let r=m(2);return h(r.formData.amount,i)||(r.formData.amount=i),p(i)}),o()()(),a(21,"div")(22,"label",23),d(23," Start Date "),a(24,"span",24),d(25,"*"),o()(),a(26,"input",29),y("ngModelChange",function(i){c(e);let r=m(2);return h(r.formData.date,i)||(r.formData.date=i),p(i)}),o()(),a(27,"div")(28,"label",23),d(29," Frequency "),a(30,"span",24),d(31,"*"),o()(),a(32,"app-select",30),y("ngModelChange",function(i){c(e);let r=m(2);return h(r.formData.repeat_interval,i)||(r.formData.repeat_interval=i),p(i)}),o()(),a(33,"div")(34,"app-select",31),y("ngModelChange",function(i){c(e);let r=m(2);return h(r.formData.category_id,i)||(r.formData.category_id=i),p(i)}),_("selectionChange",function(){c(e);let i=m(2);return p(i.onCategoryChange())}),o()(),a(35,"div")(36,"app-select",32),y("ngModelChange",function(i){c(e);let r=m(2);return h(r.formData.paymenttype_id,i)||(r.formData.paymenttype_id=i),p(i)}),_("selectionChange",function(){c(e);let i=m(2);return p(i.onPaymentTypeChange())}),o()(),a(37,"div",33),f(38,we,2,0,"button",34),a(39,"button",35),_("click",function(){c(e);let i=m(2);return p(i.save())}),f(40,Se,1,0,"span",36),d(41),o()()()(),a(42,"div",37)(43,"div",38)(44,"h3",39),d(45,"Existing Scheduled Expenses"),o(),a(46,"span",40),d(47),o()(),a(48,"div",41)(49,"table",42)(50,"thead",43)(51,"tr")(52,"th",44),d(53,"Name"),o(),a(54,"th",44),d(55,"Amount"),o(),a(56,"th",44),d(57,"Next date"),o(),a(58,"th",44),d(59,"Frequency"),o(),a(60,"th",44),d(61,"Category"),o(),a(62,"th",44),d(63,"Account"),o(),a(64,"th",44),d(65,"Actions"),o()()(),a(66,"tbody",45),f(67,ke,24,18,"tr",46)(68,Ve,6,0,"tr",47),o()()()()()}if(l&2){let e=m(2);s(3),C(" ",e.isEditing?"Edit Scheduled Expense":"Add New Scheduled Expense"," "),s(),g("ngIf",e.formErrorMessage),s(7),x("ngModel",e.formData.name),s(9),x("ngModel",e.formData.amount),s(6),x("ngModel",e.formData.date),s(6),x("ngModel",e.formData.repeat_interval),g("options",e.frequencyOptions)("placeholder","Select frequency...")("bgColor","bg-zinc-900"),s(2),g("options",e.categoriesOptions)("label","Category")("placeholder","Select a category..."),x("ngModel",e.formData.category_id),s(2),g("options",e.paymentTypesOptions)("label","Account")("placeholder","Select an account..."),x("ngModel",e.formData.paymenttype_id),s(2),g("ngIf",e.isEditing),s(),g("disabled",e.isSaving),s(),g("ngIf",e.isSaving),s(),C(" ",e.isSaving?"Saving...":e.isEditing?"Update Scheduled Expense":"Create Scheduled Expense"," "),s(6),C("",e.scheduledExpenses.length," total"),s(20),g("ngForOf",e.scheduledExpenses),s(),g("ngIf",e.scheduledExpenses.length===0)}}function ze(l,n){if(l&1){let e=w();a(0,"div",2),_("click",function(){c(e);let i=m();return p(i.close())}),a(1,"div",3),_("click",function(i){return c(e),p(i.stopPropagation())}),a(2,"div",4)(3,"h2",5),d(4,"Manage Scheduled Expenses"),o(),a(5,"div",6)(6,"button",7),_("click",function(){c(e);let i=m();return p(i.refreshScheduledExpenses())}),d(7," Refresh "),o(),a(8,"button",8),_("click",function(){c(e);let i=m();return p(i.close())}),b(),a(9,"svg",9),v(10,"path",10),o()()()(),T(),a(11,"div",11),f(12,ve,2,1,"div",12)(13,Ce,2,0,"div",13)(14,Oe,69,24,"div",14),o()()()}if(l&2){let e=m();s(6),g("disabled",e.isLoading),s(6),g("ngIf",e.errorMessage),s(),g("ngIf",e.isLoading),s(),g("ngIf",!e.isLoading)}}var R=class l{constructor(n,e){this.financeService=n;this.cdr=e}expense=null;isOpen=!1;closeDialog=new D;scheduledExpenseSaved=new D;formData={name:"",amount:0,date:"",category_id:null,paymenttype_id:null,repeat_interval:null};categories=[];paymentTypes=[];categoriesOptions=[];paymentTypesOptions=[];frequencyOptions=[];isLoading=!1;isSaving=!1;errorMessage=null;formErrorMessage=null;isEditing=!1;scheduledExpenses=[];isConfirmDialogOpen=!1;confirmDialogTitle="";confirmDialogMessage="";pendingDeleteExpense=null;ngOnInit(){this.loadMetadata(),this.frequencyOptions=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}]}ngOnChanges(){this.isOpen&&(this.refreshScheduledExpenses(),this.expense?this.formData={name:this.expense.name||"",amount:this.expense.amount||0,date:this.expense.date?new Date(this.expense.date).toISOString().split("T")[0]:"",category_id:this.expense.expense_categories?.id||null,paymenttype_id:this.expense.payment_types?.id||null,repeat_interval:this.expense.repeat_interval||null}:this.formData={name:"",amount:0,date:new Date().toISOString().split("T")[0],category_id:null,paymenttype_id:null,repeat_interval:"monthly"})}async loadMetadata(){this.isLoading=!0;try{let[n,e]=await Promise.all([this.financeService.getCategories(),this.financeService.getPaymentTypes()]);this.categories=n||[],this.paymentTypes=e||[],this.categoriesOptions=this.categories.map(t=>({value:t.id,label:t.name,description:t.description})),this.paymentTypesOptions=this.paymentTypes.map(t=>({value:t.id,label:t.name}))}catch(n){console.error("Failed to load metadata",n),this.errorMessage="Failed to load categories and payment types"}finally{this.isLoading=!1}}close(){this.closeDialog.emit(),this.resetForm()}async save(){if(this.validateForm()){this.isSaving=!0,this.errorMessage=null;try{if(this.expense){let n=await this.financeService.updateScheduledExpense(this.expense.id,{name:this.formData.name,amount:parseFloat(this.formData.amount),date:this.formData.date,category_id:this.formData.category_id,paymenttype_id:this.formData.paymenttype_id,repeat_interval:this.formData.repeat_interval});this.scheduledExpenseSaved.emit(n)}else{let n=await this.financeService.createScheduledExpense({name:this.formData.name,amount:parseFloat(this.formData.amount),date:this.formData.date,category_id:this.formData.category_id,paymenttype_id:this.formData.paymenttype_id,repeat_interval:this.formData.repeat_interval});this.scheduledExpenseSaved.emit(n)}this.close()}catch(n){console.error("Failed to save scheduled expense",n),this.errorMessage=n.message||"Failed to save scheduled expense"}finally{this.isSaving=!1}}}validateForm(){return!this.formData.name||this.formData.name.trim()===""?(this.errorMessage="Name is required",!1):!this.formData.amount||this.formData.amount<=0?(this.errorMessage="Amount must be greater than 0",!1):this.formData.date?this.formData.repeat_interval?!0:(this.errorMessage="Frequency is required",!1):(this.errorMessage="Start date is required",!1)}resetForm(){this.formData={name:"",amount:0,date:"",category_id:null,paymenttype_id:null,repeat_interval:null},this.errorMessage=null}getCategoryColor(n){return n&&this.categories.find(t=>t.id===n)?.color||"#71717a"}getPaymentTypeColor(n){return n&&this.paymentTypes.find(t=>t.id===n)?.color||"#71717a"}getCategoryName(n){return n&&this.categories.find(t=>t.id===n)?.name||""}getPaymentTypeName(n){return n&&this.paymentTypes.find(t=>t.id===n)?.name||""}onCategoryChange(){console.log("Category changed:",this.formData.category_id)}onPaymentTypeChange(){console.log("Payment type changed:",this.formData.paymenttype_id)}async refreshScheduledExpenses(){this.isLoading=!0,this.errorMessage=null;try{this.scheduledExpenses=await this.financeService.getScheduledExpenses()}catch(n){console.error("Failed to load scheduled expenses",n),this.errorMessage="Failed to load scheduled expenses"}finally{this.isLoading=!1,this.cdr.detectChanges()}}editScheduledExpense(n){this.isEditing=!0,this.formData={name:n.name||"",amount:n.amount||0,date:n.date?new Date(n.date).toISOString().split("T")[0]:"",category_id:n.expense_categories?.id||null,paymenttype_id:n.payment_types?.id||null,repeat_interval:n.repeat_interval||null}}cancelEdit(){this.isEditing=!1,this.formData={name:"",amount:0,date:new Date().toISOString().split("T")[0],category_id:null,paymenttype_id:null,repeat_interval:"monthly"}}async deleteScheduledExpense(n){this.pendingDeleteExpense=n,this.confirmDialogTitle="Delete Scheduled Expense",this.confirmDialogMessage=`Are you sure you want to delete "${n.name}"?`,this.isConfirmDialogOpen=!0}async confirmDelete(){if(!this.pendingDeleteExpense)return;let n=this.pendingDeleteExpense;this.isConfirmDialogOpen=!1,this.pendingDeleteExpense=null;try{await this.financeService.deleteScheduledExpense(n.id),this.scheduledExpenses=this.scheduledExpenses.filter(e=>e.id!==n.id)}catch(e){console.error("Failed to delete scheduled expense",e),this.errorMessage="Failed to delete scheduled expense"}}cancelDelete(){this.isConfirmDialogOpen=!1,this.pendingDeleteExpense=null}static \u0275fac=function(e){return new(e||l)(S(V),S(P))};static \u0275cmp=E({type:l,selectors:[["app-scheduled-expense-dialog"]],inputs:{expense:"expense",isOpen:"isOpen"},outputs:{closeDialog:"closeDialog",scheduledExpenseSaved:"scheduledExpenseSaved"},features:[Y],decls:2,vars:7,consts:[["class","fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",3,"click",4,"ngIf"],[3,"confirmed","cancelled","isOpen","title","message","confirmText","cancelText","isDangerous"],[1,"fixed","inset-0","bg-black/70","backdrop-blur-sm","z-50","flex","items-center","justify-center","p-4","animate-fade-in",3,"click"],[1,"bg-zinc-900","rounded-lg","border","border-zinc-800","shadow-2xl","max-w-6xl","w-full","max-h-[90vh]","overflow-hidden","animate-scale-in",3,"click"],[1,"px-6","py-4","border-b","border-zinc-800","flex","items-center","justify-between","bg-zinc-900/50"],[1,"text-xl","font-semibold","text-white"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1.5","text-sm","font-medium","text-zinc-300","hover:text-white","bg-zinc-800","rounded-md","hover:bg-zinc-700","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-zinc-400","hover:text-white","transition-colors","p-1","hover:bg-zinc-800","rounded",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-6","py-6","overflow-y-auto","max-h-[calc(90vh-140px)]"],["class","mb-4 p-3 bg-red-900/20 border border-red-900 rounded-md text-red-400 text-sm",4,"ngIf"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"mb-4","p-3","bg-red-900/20","border","border-red-900","rounded-md","text-red-400","text-sm"],[1,"flex","items-center","justify-center","py-12"],[1,"animate-spin","h-8","w-8","border-2","border-brand","border-t-transparent","rounded-full"],[1,"space-y-6"],[1,"bg-zinc-950","border","border-zinc-800","rounded-lg","p-4"],[1,"text-lg","font-semibold","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-zinc-300","mb-2"],[1,"text-red-400"],["type","text","name","name","placeholder","e.g., Monthly Rent",1,"w-full","px-4","py-2.5","bg-zinc-900","border","border-zinc-700","rounded-md","text-zinc-200","placeholder-zinc-500","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","transition-colors",3,"ngModelChange","ngModel"],[1,"relative"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-zinc-400"],["type","number","name","amount","step","0.01","min","0","placeholder","0.00",1,"w-full","pl-10","pr-4","py-2.5","bg-zinc-900","border","border-zinc-700","rounded-md","text-zinc-200","placeholder-zinc-500","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","transition-colors",3,"ngModelChange","ngModel"],["type","date","name","date",1,"w-full","px-2","py-1.5","md:px-3","md:py-2","bg-zinc-900","border","border-zinc-700","rounded-md","text-zinc-200","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","transition-colors","text-xs","md:text-sm",3,"ngModelChange","ngModel"],["name","repeat_interval",3,"ngModelChange","ngModel","options","placeholder","bgColor"],["name","category_id","bgColor","bg-zinc-900",3,"ngModelChange","selectionChange","options","label","placeholder","ngModel"],["name","paymenttype_id","bgColor","bg-zinc-900",3,"ngModelChange","selectionChange","options","label","placeholder","ngModel"],[1,"md:col-span-3","flex","items-center","justify-end","gap-3","pt-2"],["type","button","class","px-4 py-2 text-sm font-medium text-zinc-300 hover:text-white bg-transparent border border-zinc-700 rounded-md hover:bg-zinc-800 transition-colors",3,"click",4,"ngIf"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-black","bg-brand","rounded-md","hover:bg-brand/90","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],["class","animate-spin h-4 w-4 border-2 border-black border-t-transparent rounded-full",4,"ngIf"],[1,"bg-zinc-950","border","border-zinc-800","rounded-lg","overflow-hidden"],[1,"px-4","py-3","border-b","border-zinc-800","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-white"],[1,"text-sm","text-zinc-400"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-zinc-900"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-zinc-400","uppercase","tracking-wider"],[1,"divide-y","divide-zinc-800"],["class","hover:bg-zinc-900/50 transition-colors",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-zinc-300","hover:text-white","bg-transparent","border","border-zinc-700","rounded-md","hover:bg-zinc-800","transition-colors",3,"click"],[1,"animate-spin","h-4","w-4","border-2","border-black","border-t-transparent","rounded-full"],[1,"hover:bg-zinc-900/50","transition-colors"],[1,"px-4","py-3","whitespace-nowrap","text-sm","font-medium","text-white"],[1,"px-4","py-3","whitespace-nowrap","text-sm","text-zinc-300"],[1,"px-2","py-1","bg-zinc-800","text-zinc-200","rounded-full","text-xs","font-medium"],[1,"px-4","py-3","whitespace-nowrap","text-sm"],["class","px-2.5 py-1 rounded-full border text-xs font-medium inline-flex items-center",3,"background-color","color","border-color",4,"ngIf"],["class","text-zinc-500 text-xs",4,"ngIf"],[1,"px-4","py-3","whitespace-nowrap","text-sm","font-medium","space-x-2"],[1,"text-blue-400","hover:text-blue-300","transition-colors",3,"click"],[1,"text-red-400","hover:text-red-300","transition-colors",3,"click"],[1,"px-2.5","py-1","rounded-full","border","text-xs","font-medium","inline-flex","items-center"],[1,"text-zinc-500","text-xs"],["colspan","7",1,"px-4","py-8","text-center","text-zinc-400"],[1,"text-sm"],[1,"text-xs","text-zinc-500","mt-1"]],template:function(e,t){e&1&&(f(0,ze,15,4,"div",0),a(1,"app-confirmation-dialog",1),_("confirmed",function(){return t.confirmDelete()})("cancelled",function(){return t.cancelDelete()}),o()),e&2&&(g("ngIf",t.isOpen),s(),g("isOpen",t.isConfirmDialogOpen)("title",t.confirmDialogTitle)("message",t.confirmDialogMessage)("confirmText","Delete")("cancelText","Cancel")("isDangerous",!0))},dependencies:[M,N,F,k,oe,W,re,A,ie,le,L,ae,de,B,ee,ne,te],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scale-in{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .2s ease-out}.animate-scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scale-in .2s ease-out}[_nghost-%COMP%]     .overflow-y-auto::-webkit-scrollbar{width:8px}[_nghost-%COMP%]     .overflow-y-auto::-webkit-scrollbar-track{background:#18181b;border-radius:4px}[_nghost-%COMP%]     .overflow-y-auto::-webkit-scrollbar-thumb{background:#3f3f46;border-radius:4px}[_nghost-%COMP%]     .overflow-y-auto::-webkit-scrollbar-thumb:hover{background:#52525b}"]})};function Pe(l,n){l&1&&(b(),a(0,"svg",26),v(1,"circle",27)(2,"path",28),o())}function Ne(l,n){l&1&&(a(0,"div",29),d(1," No tags yet. Create your first tag above. "),o())}function Fe(l,n){if(l&1){let e=w();a(0,"div",35)(1,"div",36),v(2,"div",37),a(3,"div",38)(4,"h5",39),d(5),o(),a(6,"p",40),d(7),o()()(),a(8,"div",41)(9,"button",42),_("click",function(){c(e);let i=m().$implicit,r=m(3);return p(r.startEdit(i))}),b(),a(10,"svg",43),v(11,"path",44),o()(),T(),a(12,"button",45),_("click",function(){c(e);let i=m().$implicit,r=m(3);return p(r.confirmDelete(i))}),b(),a(13,"svg",43),v(14,"path",46),o()()()()}if(l&2){let e=m().$implicit;s(2),O("background-color",e.color),s(3),z(e.name),s(2),z(e.color)}}function We(l,n){l&1&&(b(),a(0,"svg",53),v(1,"circle",27)(2,"path",28),o())}function Ae(l,n){if(l&1){let e=w();a(0,"div",12)(1,"div",13)(2,"div")(3,"label",14),d(4,"Tag Name"),o(),a(5,"input",47),y("ngModelChange",function(i){c(e);let r=m(4);return h(r.editingTag.name,i)||(r.editingTag.name=i),p(i)}),o()(),a(6,"div")(7,"label",14),d(8,"Color"),o(),a(9,"div",17)(10,"input",18),y("ngModelChange",function(i){c(e);let r=m(4);return h(r.editingTag.color,i)||(r.editingTag.color=i),p(i)}),o(),a(11,"input",48),y("ngModelChange",function(i){c(e);let r=m(4);return h(r.editingTag.color,i)||(r.editingTag.color=i),p(i)}),o()()()(),a(12,"div",49)(13,"button",50),_("click",function(){c(e);let i=m(4);return p(i.cancelEdit())}),d(14," Cancel "),o(),a(15,"button",51),_("click",function(){c(e);let i=m(4);return p(i.saveEdit())}),f(16,We,3,0,"svg",52),d(17),o()()()}if(l&2){let e=m(4);s(5),x("ngModel",e.editingTag.name),g("disabled",e.isEditing),s(5),x("ngModel",e.editingTag.color),g("disabled",e.isEditing),s(),x("ngModel",e.editingTag.color),g("disabled",e.isEditing),s(2),g("disabled",e.isEditing),s(2),g("disabled",e.isEditing||!e.editingTag.name.trim()),s(),g("ngIf",e.isEditing),s(),C(" ",e.isEditing?"Saving...":"Save"," ")}}function Le(l,n){if(l&1&&(a(0,"div",32),f(1,Fe,15,4,"div",33)(2,Ae,18,10,"div",34),o()),l&2){let e=n.$implicit,t=m(3);s(),g("ngIf",!t.isEditingTag(e)),s(),g("ngIf",t.isEditingTag(e))}}function je(l,n){if(l&1&&(a(0,"div",30),f(1,Le,3,2,"div",31),o()),l&2){let e=m(2);s(),g("ngForOf",e.tags)}}function Be(l,n){if(l&1){let e=w();a(0,"div",2),_("click",function(){c(e);let i=m();return p(i.close())}),a(1,"div",3),_("click",function(i){return c(e),p(i.stopPropagation())}),a(2,"div",4)(3,"h3",5),d(4,"Manage Tags"),o(),a(5,"button",6),_("click",function(){c(e);let i=m();return p(i.close())}),b(),a(6,"svg",7),v(7,"path",8),o()()(),T(),a(8,"div",9)(9,"div",10)(10,"h4",11),d(11,"Create New Tag"),o(),a(12,"div",12)(13,"div",13)(14,"div")(15,"label",14),d(16," Tag Name "),a(17,"span",15),d(18,"*"),o()(),a(19,"input",16),y("ngModelChange",function(i){c(e);let r=m();return h(r.newTagName,i)||(r.newTagName=i),p(i)}),o()(),a(20,"div")(21,"label",14),d(22," Color (Optional) "),o(),a(23,"div",17)(24,"input",18),y("ngModelChange",function(i){c(e);let r=m();return h(r.newTagColor,i)||(r.newTagColor=i),p(i)}),o(),a(25,"input",19),y("ngModelChange",function(i){c(e);let r=m();return h(r.newTagColor,i)||(r.newTagColor=i),p(i)}),o()()()(),a(26,"button",20),_("click",function(){c(e);let i=m();return p(i.createTag())}),f(27,Pe,3,0,"svg",21),d(28),o()()(),a(29,"div")(30,"h4",11),d(31,"Existing Tags"),o(),f(32,Ne,2,0,"div",22)(33,je,2,1,"div",23),o()(),a(34,"div",24)(35,"button",25),_("click",function(){c(e);let i=m();return p(i.close())}),d(36," Close "),o()()()()}if(l&2){let e=m();s(19),x("ngModel",e.newTagName),g("disabled",e.isCreating),s(5),x("ngModel",e.newTagColor),g("disabled",e.isCreating),s(),x("ngModel",e.newTagColor),g("disabled",e.isCreating),s(),g("disabled",e.isCreating||!e.newTagName.trim()),s(),g("ngIf",e.isCreating),s(),C(" ",e.isCreating?"Creating...":"Create Tag"," "),s(4),g("ngIf",e.tags.length===0),s(),g("ngIf",e.tags.length>0)}}var H=class l{constructor(n,e){this.financeService=n;this.notificationService=e}isOpen=!1;closeDialog=new D;updated=new D;tags=[];newTagName="";newTagColor="";isCreating=!1;isEditing=!1;showDeleteConfirm=!1;tagToDelete=null;editingTag=null;ngOnInit(){this.loadTags()}async loadTags(){try{this.tags=await this.financeService.getTags()}catch(n){this.notificationService.error(n.message||"Failed to load tags")}}async createTag(){if(!this.newTagName.trim()){this.notificationService.error("Tag name is required");return}this.isCreating=!0;try{await this.financeService.createTag(this.newTagName.trim(),this.newTagColor||void 0),this.notificationService.success("Tag created"),this.newTagName="",this.newTagColor="",await this.loadTags(),this.updated.emit()}catch(n){this.notificationService.error(n.message||"Failed to create tag")}finally{this.isCreating=!1}}startEdit(n){this.editingTag=q({},n)}cancelEdit(){this.editingTag=null}async saveEdit(){if(this.editingTag){if(!this.editingTag.name.trim()){this.notificationService.error("Tag name is required");return}this.isEditing=!0;try{await this.financeService.updateTag(this.editingTag.id,this.editingTag.name.trim(),this.editingTag.color),this.notificationService.success("Tag updated"),this.editingTag=null,await this.loadTags(),this.updated.emit()}catch(n){this.notificationService.error(n.message||"Failed to update tag")}finally{this.isEditing=!1}}}confirmDelete(n){this.tagToDelete=n,this.showDeleteConfirm=!0}async deleteTag(){if(this.tagToDelete)try{await this.financeService.deleteTag(this.tagToDelete.id),this.notificationService.success("Tag deleted"),this.showDeleteConfirm=!1,this.tagToDelete=null,await this.loadTags(),this.updated.emit()}catch(n){this.notificationService.error(n.message||"Failed to delete tag")}}close(){this.editingTag=null,this.closeDialog.emit()}getDeleteMessage(){return this.tagToDelete?`Are you sure you want to delete the tag "${this.tagToDelete.name}"? This will remove the tag from all expenses.`:""}isEditingTag(n){return this.editingTag?.id===n.id}static \u0275fac=function(e){return new(e||l)(S(V),S(j))};static \u0275cmp=E({type:l,selectors:[["app-manage-tags-dialog"]],inputs:{isOpen:"isOpen"},outputs:{closeDialog:"closeDialog",updated:"updated"},decls:2,vars:4,consts:[["class","fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 backdrop-blur-sm",3,"click",4,"ngIf"],["title","Delete Tag","confirmText","Delete","cancelText","Cancel",3,"confirmed","cancelled","isOpen","message","iconType"],[1,"fixed","inset-0","bg-black/70","flex","items-center","justify-center","z-50","p-4","backdrop-blur-sm",3,"click"],[1,"bg-zinc-900","rounded-lg","shadow-2xl","border","border-zinc-800","w-full","max-w-2xl","max-h-[90vh]","overflow-hidden","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-zinc-800"],[1,"text-xl","font-semibold","text-white"],["title","Close",1,"text-zinc-400","hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","px-6","py-4","space-y-6"],[1,"bg-zinc-950","border","border-zinc-800","rounded-lg","p-4"],[1,"text-sm","font-semibold","text-white","mb-3"],[1,"space-y-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"block","text-xs","font-medium","text-zinc-400","mb-1"],[1,"text-red-400"],["type","text","placeholder","e.g., urgent, work, personal","maxlength","50",1,"w-full","px-3","py-2","bg-zinc-900","border","border-zinc-700","rounded","text-white","placeholder-zinc-500","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","text-sm",3,"ngModelChange","ngModel","disabled"],[1,"flex","gap-2"],["type","color",1,"h-9","w-14","bg-zinc-900","border","border-zinc-700","rounded","cursor-pointer",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Random if empty","maxlength","7",1,"flex-1","px-3","py-2","bg-zinc-900","border","border-zinc-700","rounded","text-white","placeholder-zinc-500","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","text-sm",3,"ngModelChange","ngModel","disabled"],[1,"w-full","bg-brand","text-black","px-4","py-2","rounded","font-medium","hover:bg-brand/90","transition-colors","text-sm","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center",3,"click","disabled"],["class","animate-spin h-4 w-4 mr-2","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","text-center py-8 text-zinc-500 text-sm",4,"ngIf"],["class","space-y-2",4,"ngIf"],[1,"px-6","py-4","border-t","border-zinc-800","flex","justify-end"],[1,"bg-zinc-800","text-white","px-4","py-2","rounded","font-medium","hover:bg-zinc-700","transition-colors","text-sm",3,"click"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-center","py-8","text-zinc-500","text-sm"],[1,"space-y-2"],["class","bg-zinc-950 border border-zinc-800 rounded-lg p-4 hover:border-zinc-700 transition-colors",4,"ngFor","ngForOf"],[1,"bg-zinc-950","border","border-zinc-800","rounded-lg","p-4","hover:border-zinc-700","transition-colors"],["class","flex items-center justify-between gap-3",4,"ngIf"],["class","space-y-3",4,"ngIf"],[1,"flex","items-center","justify-between","gap-3"],[1,"flex","items-center","gap-3","flex-1","min-w-0"],[1,"w-8","h-8","rounded","flex-shrink-0"],[1,"flex-1","min-w-0"],[1,"text-white","font-medium","text-sm","truncate"],[1,"text-zinc-400","text-xs"],[1,"flex","gap-2","flex-shrink-0"],["title","Edit tag",1,"text-zinc-400","hover:text-brand","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete tag",1,"text-zinc-400","hover:text-red-400","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["type","text","maxlength","50",1,"w-full","px-3","py-2","bg-zinc-900","border","border-zinc-700","rounded","text-white","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","text-sm",3,"ngModelChange","ngModel","disabled"],["type","text","maxlength","7",1,"flex-1","px-3","py-2","bg-zinc-900","border","border-zinc-700","rounded","text-white","focus:outline-none","focus:border-brand","focus:ring-1","focus:ring-brand","text-sm",3,"ngModelChange","ngModel","disabled"],[1,"flex","gap-2","justify-end"],[1,"px-3","py-1.5","text-sm","bg-zinc-800","text-white","rounded","hover:bg-zinc-700","transition-colors","disabled:opacity-50",3,"click","disabled"],[1,"px-3","py-1.5","text-sm","bg-brand","text-black","rounded","font-medium","hover:bg-brand/90","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center",3,"click","disabled"],["class","animate-spin h-3 w-3 mr-1","fill","none","viewBox","0 0 24 24",4,"ngIf"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-3","w-3","mr-1"]],template:function(e,t){e&1&&(f(0,Be,37,11,"div",0),a(1,"app-confirmation-dialog",1),_("confirmed",function(){return t.deleteTag()})("cancelled",function(){return t.showDeleteConfirm=!1}),o()),e&2&&(g("ngIf",t.isOpen),s(),g("isOpen",t.showDeleteConfirm)("message",t.getDeleteMessage())("iconType","warning"))},dependencies:[M,N,F,k,W,A,se,L,B],encapsulation:2})};var Re=["headerActions"];function He(l,n){if(l&1){let e=w();a(0,"button",5),_("click",function(){c(e);let i=m();return p(i.openManageTags())}),b(),a(1,"svg",6),v(2,"path",7),o(),T(),a(3,"span",8),d(4,"Manage Tags"),o()(),a(5,"button",5),_("click",function(){c(e);let i=m();return p(i.onManageScheduledExpenses())}),b(),a(6,"svg",6),v(7,"path",9),o(),T(),a(8,"span",8),d(9,"Scheduled Expenses"),o()(),a(10,"button",10),_("click",function(){c(e);let i=m();return p(i.onAddOutcome())}),b(),a(11,"svg",6),v(12,"path",11),o(),T(),a(13,"span",8),d(14,"New Outcome"),o()()}}var fe=class l{constructor(n,e,t){this.financeService=n;this.cdr=e;this.notificationService=t;let i=new Date().getFullYear();for(let r=0;r<5;r++)this.years.push(i-r)}headerActionsTemplate;pageHeaderService=G(pe);pageHeaderActionsService=G(me);rowData=[];isLoading=!1;errorMessage=null;currentPage=1;pageSize=20;totalRecords=0;get totalAmount(){return this.rowData.reduce((n,e)=>n+(e.amount||0),0)}currentSort="date";currentOrder="desc";searchQuery="";selectedMonth=null;selectedYear=new Date().getFullYear();selectedCategory=null;selectedPaymentType=null;selectedTagIds=[];isDialogOpen=!1;selectedExpense=null;isScheduledDialogOpen=!1;isManageTagsDialogOpen=!1;categories=[];paymentTypes=[];tags=[];tagsOptions=[];months=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];years=[];columnDefs=[{field:"id",headerName:"ID",width:80,hide:!0},{field:"name",headerName:"Description",flex:1.5,minWidth:200,cellStyle:{fontWeight:"500",display:"flex",alignItems:"center"}},{field:"amount",headerName:"Amount",width:140,type:"rightAligned",valueFormatter:n=>n.value?new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(n.value):"-",cellStyle:{fontWeight:"600",color:"#fff",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"flex-end"}},{field:"date",headerName:"Date",width:130,valueFormatter:n=>n.value?new Date(n.value).toLocaleDateString():"-",cellStyle:{color:"#a1a1aa",display:"flex",alignItems:"center"}},{headerName:"Category",width:150,valueGetter:n=>n.data.expense_categories,cellRenderer:n=>{let e=n.value;if(!e)return"-";let t=e.color||"#71717a";return`
          <span style="background-color: ${t+"33"}; color: ${t}; border-color: ${t}4d;" 
                class="px-2.5 py-0.5 rounded-full border text-xs font-medium inline-flex items-center">
            ${e.name}
          </span>`},cellStyle:{display:"flex",alignItems:"center"}},{headerName:"Account",width:160,valueGetter:n=>n.data.payment_types,cellRenderer:n=>{let e=n.value;if(!e)return"-";let t=e.color||"#71717a";return`
          <span style="background-color: ${t+"33"}; color: ${t}; border-color: ${t}4d;" 
                class="px-2.5 py-0.5 rounded-full border text-xs font-medium inline-flex items-center">
            ${e.name}
          </span>`},cellStyle:{display:"flex",alignItems:"center"}},{field:"expense_tags",headerName:"Tags",width:150,cellRenderer:n=>{let e=n.value||[];if(e.length===0)return"";if(e.length===1){let r=e[0];return`<span style="background: ${r.color}20; color: ${r.color}; border: 1px solid ${r.color}40;" 
                       class="px-2 py-1 rounded text-xs whitespace-nowrap">
                    ${r.name}
                  </span>`}let t=e[0],i=e.length-1;return`<span style="background: ${t.color}20; color: ${t.color}; border: 1px solid ${t.color}40;" 
                     class="px-2 py-1 rounded text-xs whitespace-nowrap">
                  ${t.name} +${i}
                </span>`},tooltipValueGetter:n=>{let e=n.value||[];return e.length===0?"":e.map(t=>t.name).join(", ")}},{headerName:"",width:60,pinned:"right",cellRenderer:n=>`
          <button 
            class="delete-btn p-1.5 rounded hover:bg-red-900/20 text-zinc-500 hover:text-red-400 transition-colors"
            data-action="delete"
            data-id="${n.data.id}"
            title="Delete expense">
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          </button>`,cellStyle:{display:"flex",alignItems:"center",justifyContent:"center"},suppressHeaderMenuButton:!0,sortable:!1}];defaultColDef={sortable:!0,filter:!1,suppressHeaderMenuButton:!0,resizable:!0,cellStyle:{display:"flex",alignItems:"center"}};ngOnInit(){this.pageHeaderService.setHeader("Outcomes"),this.loadMetadata()}ngAfterViewInit(){this.pageHeaderActionsService.setActions(this.headerActionsTemplate),this.cdr.detectChanges()}ngOnDestroy(){this.pageHeaderActionsService.clearActions()}async loadMetadata(){try{let[n,e,t]=await Promise.all([this.financeService.getCategories(),this.financeService.getPaymentTypes(),this.financeService.getTags()]);this.categories=n||[],this.paymentTypes=e||[],this.tags=t||[],this.tagsOptions=this.tags.map(i=>({id:i.id,name:i.name,color:i.color}))}catch(n){console.error("Failed to load metadata",n)}}onGridReady(){this.loadData()}onSortChanged(n){this.currentSort=n.field,this.currentOrder=n.order,this.currentPage=1,this.loadData()}onPageChanged(n){this.currentPage=n,this.loadData()}onFilterChanged(){this.currentPage=1,this.loadData()}onRowClicked(n){this.selectedExpense=n,this.isDialogOpen=!0}onCellClicked(n){let t=n.event?.target?.closest('[data-action="delete"]');if(t){let i=t.getAttribute("data-id");i&&this.deleteExpense(parseInt(i));return}this.onRowClicked(n.data)}async deleteExpense(n){let t=this.rowData.find(r=>r.id===n)?.name||"this expense";if(confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`))try{await this.financeService.deleteExpense(n),this.rowData=this.rowData.filter(r=>r.id!==n),this.totalRecords--,this.notificationService.success("Expense deleted",3e3,"Expense deleted",`Deleted "${t}"`),this.cdr.detectChanges()}catch(r){console.error("Failed to delete expense",r),alert("Failed to delete expense: "+(r.message||"Unknown error"))}}onAddOutcome(){this.selectedExpense=null,this.isDialogOpen=!0}onDialogClose(){this.isDialogOpen=!1,this.selectedExpense=null}onManageScheduledExpenses(){this.isScheduledDialogOpen=!0,this.cdr.detectChanges()}openManageTags(){this.isManageTagsDialogOpen=!0}onTagsUpdated(){this.loadMetadata(),this.loadData()}onScheduledDialogClose(){this.isScheduledDialogOpen=!1}onScheduledExpenseSaved(n){this.loadData()}onExpenseSaved(n){if(this.selectedExpense){let e=this.rowData.findIndex(t=>t.id===n.id);e!==-1&&(this.rowData[e]=n,this.rowData=[...this.rowData],this.notificationService.success("Expense updated",3e3,"Expense updated",`Updated "${n.name}" (${n.amount} \u20AC)`))}else this.loadData(),this.notificationService.success("Expense created",3e3,"Expense created",`Created "${n.name}" (${n.amount} \u20AC)`)}async loadData(){this.isLoading=!0,this.errorMessage=null;try{let{data:n,count:e}=await this.financeService.getExpenses({page:this.currentPage,pageSize:this.pageSize,sort:this.currentSort,order:this.currentOrder,month:this.selectedMonth||void 0,year:this.selectedYear||void 0,categoryId:this.selectedCategory||void 0,paymentTypeId:this.selectedPaymentType||void 0,tagIds:this.selectedTagIds.length>0?this.selectedTagIds:void 0,search:this.searchQuery});n&&(this.rowData=n,e!==null&&(this.totalRecords=e))}catch(n){console.error("Error loading expenses",n),this.errorMessage=n.message||"Failed to load expenses"}finally{this.isLoading=!1,this.cdr.detectChanges()}}static \u0275fac=function(e){return new(e||l)(S(V),S(P),S(j))};static \u0275cmp=E({type:l,selectors:[["app-outcomes"]],viewQuery:function(e,t){if(e&1&&Q(Re,5),e&2){let i;U(i=J())&&(t.headerActionsTemplate=i.first)}},decls:6,vars:25,consts:[["headerActions",""],["emptyStateMessage","No outcomes found matching your criteria.",3,"searchValueChange","selectedMonthChange","selectedYearChange","selectedCategoryChange","selectedPaymentTypeChange","selectedTagIdsChange","gridReady","sortChanged","pageChanged","filterChanged","cellClicked","columnDefs","defaultColDef","rowData","loading","error","currentPage","pageSize","totalRecords","totalAmount","searchValue","selectedMonth","selectedYear","selectedCategory","selectedPaymentType","selectedTagIds","categories","paymentTypes","tags","months","years","showFilters"],[3,"closeDialog","expenseSaved","expense","isOpen"],[3,"closeDialog","scheduledExpenseSaved","isOpen"],[3,"closeDialog","updated","isOpen"],[1,"flex","items-center","justify-center","gap-2","px-2","sm:px-4","py-2.5","h-10","text-sm","bg-zinc-800","text-white","rounded-lg","hover:bg-zinc-700","transition-colors","border","border-zinc-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"hidden","sm:inline","whitespace-nowrap"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","items-center","justify-center","gap-2","px-2","sm:px-4","py-2.5","h-10","text-sm","bg-brand","text-black","font-medium","rounded-lg","hover:bg-brand/90","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"]],template:function(e,t){if(e&1){let i=w();f(0,He,15,0,"ng-template",null,0,$),a(2,"app-data-table",1),y("searchValueChange",function(u){return c(i),h(t.searchQuery,u)||(t.searchQuery=u),p(u)})("selectedMonthChange",function(u){return c(i),h(t.selectedMonth,u)||(t.selectedMonth=u),p(u)})("selectedYearChange",function(u){return c(i),h(t.selectedYear,u)||(t.selectedYear=u),p(u)})("selectedCategoryChange",function(u){return c(i),h(t.selectedCategory,u)||(t.selectedCategory=u),p(u)})("selectedPaymentTypeChange",function(u){return c(i),h(t.selectedPaymentType,u)||(t.selectedPaymentType=u),p(u)})("selectedTagIdsChange",function(u){return c(i),h(t.selectedTagIds,u)||(t.selectedTagIds=u),p(u)}),_("gridReady",function(){return c(i),p(t.onGridReady())})("sortChanged",function(u){return c(i),p(t.onSortChanged(u))})("pageChanged",function(u){return c(i),p(t.onPageChanged(u))})("filterChanged",function(){return c(i),p(t.onFilterChanged())})("cellClicked",function(u){return c(i),p(t.onCellClicked(u))}),o(),a(3,"app-expense-dialog",2),_("closeDialog",function(){return c(i),p(t.onDialogClose())})("expenseSaved",function(u){return c(i),p(t.onExpenseSaved(u))}),o(),a(4,"app-scheduled-expense-dialog",3),_("closeDialog",function(){return c(i),p(t.onScheduledDialogClose())})("scheduledExpenseSaved",function(u){return c(i),p(t.onScheduledExpenseSaved(u))}),o(),a(5,"app-manage-tags-dialog",4),_("closeDialog",function(){return c(i),p(t.isManageTagsDialogOpen=!1)})("updated",function(){return c(i),p(t.onTagsUpdated())}),o()}e&2&&(s(2),g("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("rowData",t.rowData)("loading",t.isLoading)("error",t.errorMessage)("currentPage",t.currentPage)("pageSize",t.pageSize)("totalRecords",t.totalRecords)("totalAmount",t.totalAmount),x("searchValue",t.searchQuery)("selectedMonth",t.selectedMonth)("selectedYear",t.selectedYear)("selectedCategory",t.selectedCategory)("selectedPaymentType",t.selectedPaymentType)("selectedTagIds",t.selectedTagIds),g("categories",t.categories)("paymentTypes",t.paymentTypes)("tags",t.tags)("months",t.months)("years",t.years)("showFilters",!0),s(),g("expense",t.selectedExpense)("isOpen",t.isDialogOpen),s(),g("isOpen",t.isScheduledDialogOpen),s(),g("isOpen",t.isManageTagsDialogOpen))},dependencies:[M,k,ge,ce,R,H],encapsulation:2})};export{fe as OutcomesComponent};
