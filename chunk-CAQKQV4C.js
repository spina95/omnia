import{a as fe,b as Ce}from"./chunk-3A3CGSAI.js";import{a as le,b as me}from"./chunk-TAUIMB6N.js";import{a as xe}from"./chunk-C63EFFU4.js";import{a as be}from"./chunk-UOLMP3I2.js";import{a as ye}from"./chunk-LUCJ22EB.js";import{a as De}from"./chunk-M7IKQJGJ.js";import{a as pe,d as ge,g as he,r as ue}from"./chunk-IURNE76V.js";import{Ba as U,F as q,Fa as Y,G as X,Ja as k,K as ee,Kb as re,L as te,Pa as D,Qa as o,Ra as i,Sa as C,T as B,U as H,Wb as K,Xb as ce,Z as ne,_ as ae,_a as O,ab as P,cc as J,fa as se,hc as de,kb as T,lb as j,mb as oe,nb as u,ob as W,pb as I,qb as V,sb as N,ta as p,tb as $,ub as z,vb as ie,wb as Z}from"./chunk-XVI4XSAG.js";import{a as R,b as L}from"./chunk-VOSPIT4N.js";function we(g,e){if(g&1&&(o(0,"div",15),C(1,"div",16),o(2,"div",17),u(3),i()()),g&2){let t=e.$implicit;T("left",t.position,"%"),p(3),W(t.year)}}var Q=class g{minDate="2022-01-01";maxDate=new Date().toISOString().split("T")[0];rangeChange=new ne;startPosition=0;endPosition=100;_startDate="";_endDate="";totalDays=0;minDateMs=0;maxDateMs=0;yearMarkers=[];isDraggingStart=!1;isDraggingEnd=!1;trackElement=null;onChange=e=>{};onTouched=()=>{};ngOnInit(){this.initializeTimeline()}ngOnChanges(e){(e.minDate||e.maxDate)&&this.initializeTimeline()}initializeTimeline(){this.minDateMs=new Date(this.minDate).getTime(),this.maxDateMs=new Date(this.maxDate).getTime(),this.totalDays=Math.floor((this.maxDateMs-this.minDateMs)/(1e3*60*60*24)),this.calculateYearMarkers(),(!this._startDate||!this._endDate)&&(this._startDate=this.minDate,this._endDate=this.maxDate,this.startPosition=0,this.endPosition=100)}calculateYearMarkers(){let e=[],t=new Date(this.minDate).getFullYear(),a=new Date(this.maxDate).getFullYear();for(let s=t;s<=a;s++){let r=new Date(s,0,1).getTime();if(r>=this.minDateMs&&r<=this.maxDateMs){let l=(r-this.minDateMs)/(this.maxDateMs-this.minDateMs)*100;e.push({position:l,year:s})}}this.yearMarkers=e}writeValue(e){e&&e.startDate&&e.endDate&&(this._startDate=e.startDate,this._endDate=e.endDate,this.updatePositionsFromDates())}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}updatePositionsFromDates(){let e=new Date(this._startDate).getTime(),t=new Date(this._endDate).getTime();this.startPosition=(e-this.minDateMs)/(this.maxDateMs-this.minDateMs)*100,this.endPosition=(t-this.minDateMs)/(this.maxDateMs-this.minDateMs)*100,this.startPosition=Math.max(0,Math.min(100,this.startPosition)),this.endPosition=Math.max(0,Math.min(100,this.endPosition))}updateDatesFromPositions(){let e=this.minDateMs+this.startPosition/100*(this.maxDateMs-this.minDateMs),t=this.minDateMs+this.endPosition/100*(this.maxDateMs-this.minDateMs);this._startDate=this.formatDate(new Date(e)),this._endDate=this.formatDate(new Date(t))}formatDate(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`}onStartThumbMouseDown(e){e.preventDefault(),this.isDraggingStart=!0,this.trackElement=e.target.closest(".timeline-container"),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}onEndThumbMouseDown(e){e.preventDefault(),this.isDraggingEnd=!0,this.trackElement=e.target.closest(".timeline-container"),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}onMouseMove=e=>{if(!this.isDraggingStart&&!this.isDraggingEnd||!this.trackElement)return;let t=this.trackElement.querySelector(".timeline-track");if(!t)return;let a=t.getBoundingClientRect(),s=e.clientX-a.left,n=Math.max(0,Math.min(100,s/a.width*100));this.isDraggingStart?(this.startPosition=Math.min(n,this.endPosition),this.updateDatesFromPositions(),this.emitChange()):this.isDraggingEnd&&(this.endPosition=Math.max(n,this.startPosition),this.updateDatesFromPositions(),this.emitChange())};onMouseUp=()=>{this.isDraggingStart=!1,this.isDraggingEnd=!1,this.trackElement=null,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)};onTrackClick(e){if(this.isDraggingStart||this.isDraggingEnd)return;let a=e.currentTarget.getBoundingClientRect(),s=e.clientX-a.left,n=Math.max(0,Math.min(100,s/a.width*100)),r=Math.abs(n-this.startPosition),l=Math.abs(n-this.endPosition);r<l?this.startPosition=Math.min(n,this.endPosition):this.endPosition=Math.max(n,this.startPosition),this.updateDatesFromPositions(),this.emitChange()}ngOnDestroy(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}emitChange(){let e={startDate:this._startDate,endDate:this._endDate};this.onChange(e),this.rangeChange.emit(e),this.onTouched()}get startDate(){return this._startDate}get endDate(){return this._endDate}get selectedRangeWidth(){return this.endPosition-this.startPosition}get selectedRangeLeft(){return this.startPosition}formatDisplayDate(e){if(!e)return"";let t=new Date(e),a={year:"numeric",month:"short",day:"numeric"};return t.toLocaleDateString("en-US",a)}static \u0275fac=function(t){return new(t||g)};static \u0275cmp=Y({type:g,selectors:[["app-date-range-timeline"]],inputs:{minDate:"minDate",maxDate:"maxDate"},outputs:{rangeChange:"rangeChange"},features:[ie([{provide:pe,useExisting:q(()=>g),multi:!0}]),se],decls:20,vars:11,consts:[[1,"date-range-timeline"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-xs","text-zinc-400"],[1,"text-brand","font-medium"],[1,"text-xs","text-zinc-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3","h-3","inline-block"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"timeline-container"],[1,"year-markers"],["class","year-marker",3,"left",4,"ngFor","ngForOf"],[1,"timeline-track",3,"click"],[1,"selected-range"],[1,"timeline-thumb","start-thumb",3,"mousedown"],[1,"thumb-circle"],[1,"timeline-thumb","end-thumb",3,"mousedown"],[1,"year-marker"],[1,"year-tick"],[1,"year-label"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),u(4),i()(),o(5,"div",4),B(),o(6,"svg",5),C(7,"path",6),i()(),H(),o(8,"div",2)(9,"span",3),u(10),i()()(),o(11,"div",7)(12,"div",8),k(13,we,4,3,"div",9),i(),o(14,"div",10),O("click",function(n){return a.onTrackClick(n)}),C(15,"div",11),o(16,"div",12),O("mousedown",function(n){return a.onStartThumbMouseDown(n)}),C(17,"div",13),i(),o(18,"div",14),O("mousedown",function(n){return a.onEndThumbMouseDown(n)}),C(19,"div",13),i()()()()),t&2&&(p(4),W(a.formatDisplayDate(a.startDate)),p(6),W(a.formatDisplayDate(a.endDate)),p(3),D("ngForOf",a.yearMarkers),p(2),T("left",a.selectedRangeLeft,"%")("width",a.selectedRangeWidth,"%"),p(),T("left",a.startPosition,"%"),p(2),T("left",a.endPosition,"%"))},dependencies:[J,K],styles:[".date-range-timeline[_ngcontent-%COMP%]{width:100%;padding:8px 0}.timeline-container[_ngcontent-%COMP%]{position:relative;height:50px;padding:8px 0}.year-markers[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:20px;pointer-events:none}.year-marker[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%)}.year-tick[_ngcontent-%COMP%]{width:1px;height:8px;background-color:#52525b;margin:0 auto}.year-label[_ngcontent-%COMP%]{font-size:10px;color:#71717a;text-align:center;margin-top:2px;white-space:nowrap}.timeline-track[_ngcontent-%COMP%]{position:absolute;top:24px;left:0;right:0;height:6px;background-color:#27272a;border-radius:3px;overflow:visible;cursor:pointer}.selected-range[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;background:linear-gradient(90deg,#3ecf8e,#2ea06d);border-radius:3px;transition:all .1s ease}.timeline-thumb[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);z-index:3;pointer-events:auto;cursor:grab}.timeline-thumb[_ngcontent-%COMP%]:active{cursor:grabbing}.thumb-circle[_ngcontent-%COMP%]{width:18px;height:18px;background:linear-gradient(135deg,#3ecf8e,#2ea06d);border:3px solid #18181b;border-radius:50%;box-shadow:0 2px 8px #3ecf8e66,0 0 #3ecf8e66;transition:all .2s ease;pointer-events:none}.timeline-thumb[_ngcontent-%COMP%]:hover   .thumb-circle[_ngcontent-%COMP%]{transform:scale(1.15);box-shadow:0 4px 12px #3ecf8e99,0 0 0 4px #3ecf8e1a}.timeline-thumb[_ngcontent-%COMP%]:active   .thumb-circle[_ngcontent-%COMP%]{transform:scale(1.1)}"]})};var G=class g{constructor(e){this.supabase=e}async getDashboardStats(e){let t=new Date,a=t.getFullYear(),s=e?.startDate||`${a}-01-01`,n=e?.endDate||t.toISOString().slice(0,10);try{let r=this.supabase.client.from("incomes").select("amount").gte("date",s).lte("date",n);e?.paymentTypeIds?.length&&(r=r.in("paymentType_id",e.paymentTypeIds)),e?.incomeCategoryIds?.length&&(r=r.in("category_id",e.incomeCategoryIds));let{data:l}=await r,h=this.supabase.client.from("expenses").select("amount").gte("date",s).lte("date",n);e?.paymentTypeIds?.length&&(h=h.in("paymentType_id",e.paymentTypeIds)),e?.expenseCategoryIds?.length&&(h=h.in("category_id",e.expenseCategoryIds));let{data:m}=await h,d=l?.reduce((b,x)=>b+(x.amount||0),0)||0,y=m?.reduce((b,x)=>b+(x.amount||0),0)||0,f="";if(s&&n){let b=new Date(s),x=new Date(n),v=b.toLocaleDateString("en-US",{month:"short",year:"numeric"}),w=x.toLocaleDateString("en-US",{month:"short",year:"numeric"});f=`${v} - ${w}`}else f=`Year ${a}`;let M=d>0?(d-y)/d*100:0;return{totalIncomes:d,totalExpenses:y,balance:d-y,savingsPercentage:M,period:f}}catch(r){return console.error("Error fetching dashboard stats:",r),{totalIncomes:0,totalExpenses:0,balance:0,savingsPercentage:0,period:""}}}async getIncomesVsExpenses(e){let t=new Date,a=e?.startDate,s=e?.endDate||t.toISOString().slice(0,10);if(!a||!s)return[];try{let n=this.supabase.client.from("incomes").select("date, amount").gte("date",a).lt("date",s).order("date",{ascending:!0});e?.paymentTypeIds?.length&&(n=n.in("paymentType_id",e.paymentTypeIds)),e?.incomeCategoryIds?.length&&(n=n.in("category_id",e.incomeCategoryIds));let r=this.supabase.client.from("expenses").select("date, amount").gte("date",a).lt("date",s).order("date",{ascending:!0});e?.paymentTypeIds?.length&&(r=r.in("paymentType_id",e.paymentTypeIds)),e?.expenseCategoryIds?.length&&(r=r.in("category_id",e.expenseCategoryIds));let[l,h]=await Promise.all([n,r]),m={},d=new Date(a),y=new Date(s),f=new Date(d.getFullYear(),d.getMonth(),1),M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(;f<=y;){let b=`${M[f.getMonth()]} ${String(f.getFullYear()).slice(2)}`;m[b]||(m[b]={month:b,incomes:0,expenses:0}),f.setMonth(f.getMonth()+1)}return l.data?.forEach(b=>{let x=new Date(b.date),v=`${M[x.getMonth()]} ${String(x.getFullYear()).slice(2)}`;m[v]&&(m[v].incomes+=b.amount||0)}),h.data?.forEach(b=>{let x=new Date(b.date),v=`${M[x.getMonth()]} ${String(x.getFullYear()).slice(2)}`;m[v]&&(m[v].expenses+=b.amount||0)}),Object.keys(m).sort((b,x)=>{let v=this.parseMonthKey(b),w=this.parseMonthKey(x);return v.getTime()-w.getTime()}).map(b=>m[b])}catch(n){return console.error("Error fetching incomes vs expenses:",n),[]}}parseMonthKey(e){let[t,a]=e.split(" "),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(t),r=2e3+parseInt(a,10);return new Date(r,n,1)}async getExpensesByCategory(e){let t=new Date,a=e?.startDate,s=e?.endDate||t.toISOString().slice(0,10);if(!a||!s)return[];try{let n=this.supabase.client.from("expenses").select("amount, category_id, expense_categories(name, color)").gte("date",a).lt("date",s);e?.paymentTypeIds?.length&&(n=n.in("paymentType_id",e.paymentTypeIds)),e?.expenseCategoryIds?.length&&(n=n.in("category_id",e.expenseCategoryIds));let{data:r,error:l}=await n;if(l)throw l;let h={};return r?.forEach(m=>{let d=m.expense_categories;if(d){let y=d.name;h[y]||(h[y]={value:0,color:d.color||"#71717a"}),h[y].value+=m.amount||0}}),Object.entries(h).map(([m,d])=>({name:m,value:d.value,color:d.color}))}catch(n){return console.error("Error fetching expenses by category:",n),[]}}async getExpensesByAccount(e){let t=new Date,a=e?.startDate,s=e?.endDate||t.toISOString().slice(0,10);if(!a||!s)return[];try{let n=this.supabase.client.from("expenses").select("amount, paymentType_id, payment_types(name, color)").gte("date",a).lt("date",s);e?.paymentTypeIds?.length&&(n=n.in("paymentType_id",e.paymentTypeIds)),e?.expenseCategoryIds?.length&&(n=n.in("category_id",e.expenseCategoryIds));let{data:r,error:l}=await n;if(l)throw l;let h={};return r?.forEach(m=>{let d=m.payment_types;if(d){let y=d.name;h[y]||(h[y]={value:0,color:d.color||"#71717a"}),h[y].value+=m.amount||0}}),Object.entries(h).map(([m,d])=>({name:m,value:d.value,color:d.color}))}catch(n){return console.error("Error fetching expenses by account:",n),[]}}async getIncomesByAccount(e){let t=new Date,a=e?.startDate,s=e?.endDate||t.toISOString().slice(0,10);if(!a||!s)return[];try{let n=this.supabase.client.from("incomes").select("amount, paymentType_id, payment_types(name, color)").gte("date",a).lt("date",s);e?.paymentTypeIds?.length&&(n=n.in("paymentType_id",e.paymentTypeIds)),e?.incomeCategoryIds?.length&&(n=n.in("category_id",e.incomeCategoryIds));let{data:r,error:l}=await n;if(l)throw l;let h={};return r?.forEach(m=>{let d=m.payment_types;if(d){let y=d.name;h[y]||(h[y]={value:0,color:d.color||"#71717a"}),h[y].value+=m.amount||0}}),Object.entries(h).map(([m,d])=>({name:m,value:d.value,color:d.color}))}catch(n){return console.error("Error fetching incomes by account:",n),[]}}async getExpensesByCategoryPerMonth(e){let t=new Date,a=e?.startDate,s=e?.endDate||t.toISOString().slice(0,10);if(!a||!s)return{categories:[],series:[],months:[]};try{let n=this.supabase.client.from("expenses").select("amount, date, category_id, expense_categories(name, color)").gte("date",a).lt("date",s);e?.paymentTypeIds?.length&&(n=n.in("paymentType_id",e.paymentTypeIds)),e?.expenseCategoryIds?.length&&(n=n.in("category_id",e.expenseCategoryIds));let{data:r,error:l}=await n;if(l)throw l;let h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m={},d=new Date(a),y=new Date(s),f=new Date(d.getFullYear(),d.getMonth(),1),M=0;for(;f<=y;){let S=`${h[f.getMonth()]} ${String(f.getFullYear()).slice(2)}`;m[S]=M++,f.setMonth(f.getMonth()+1)}let b=Object.keys(m).sort((S,E)=>{let c=this.parseMonthKey(S),_=this.parseMonthKey(E);return c.getTime()-_.getTime()}),x={};r?.forEach(S=>{let E=S.expense_categories;if(E){let c=E.name,_=new Date(S.date),F=`${h[_.getMonth()]} ${String(_.getFullYear()).slice(2)}`,A=m[F];A!==void 0&&(x[c]||(x[c]={values:new Array(b.length).fill(0),color:E.color||"#71717a"}),x[c].values[A]+=S.amount||0)}});let v=Object.keys(x),w=v.map(S=>({name:S,data:x[S].values,color:x[S].color}));return{categories:v,series:w,months:b}}catch(n){return console.error("Error fetching expenses by category per month:",n),{categories:[],series:[],months:[]}}}async getFirstTransactionDate(){try{let[e,t]=await Promise.all([this.supabase.client.from("expenses").select("date").order("date",{ascending:!0}).limit(1).maybeSingle(),this.supabase.client.from("incomes").select("date").order("date",{ascending:!0}).limit(1).maybeSingle()]),a=e.data?.date,s=t.data?.date;return!a&&!s?null:a?s?a<s?a:s:a:s}catch(e){return console.error("Error getting first transaction date:",e),null}}async getTopExpenses(e){try{let t=new Date,a=e?.startDate,s=e?.endDate||t.toISOString().slice(0,10);if(!a||!s)return[];let n=this.supabase.client.from("expenses").select("id, name, amount, date, category_id, expense_categories(name, color)").gte("date",a).lt("date",s).order("amount",{ascending:!1}).limit(5);e?.paymentTypeIds?.length&&(n=n.in("paymentType_id",e.paymentTypeIds)),e?.expenseCategoryIds?.length&&(n=n.in("category_id",e.expenseCategoryIds));let{data:r}=await n;return(r||[]).map(l=>L(R({},l),{type:"expense",category:l.expense_categories?.name,color:l.expense_categories?.color}))}catch(t){return console.error("Error fetching top expenses:",t),[]}}async getRecentTransactions(e){try{let t=this.supabase.client.from("incomes").select("id, name, amount, date, category_id, income_categories(name)").order("date",{ascending:!1}).limit(3),a=this.supabase.client.from("expenses").select("id, name, amount, date, category_id, expense_categories(name)").order("date",{ascending:!1}).limit(3);e?.startDate&&(t=t.gte("date",e.startDate),a=a.gte("date",e.startDate)),e?.endDate&&(t=t.lt("date",e.endDate),a=a.lt("date",e.endDate)),e?.paymentTypeIds?.length&&(t=t.in("paymentType_id",e.paymentTypeIds),a=a.in("paymentType_id",e.paymentTypeIds)),e?.incomeCategoryIds?.length&&(t=t.in("category_id",e.incomeCategoryIds)),e?.expenseCategoryIds?.length&&(a=a.in("category_id",e.expenseCategoryIds));let[s,n]=await Promise.all([t,a]),r=(s.data||[]).map(m=>L(R({},m),{type:"income",category:m.income_categories?.name})),l=(n.data||[]).map(m=>L(R({},m),{type:"expense",category:m.expense_categories?.name})),h=[...r,...l];return h.sort((m,d)=>new Date(d.date).getTime()-new Date(m.date).getTime()),h.slice(0,5)}catch(t){return console.error("Error fetching recent transactions:",t),[]}}async getSankeyFlowData(e){try{let{data:t,error:a}=await this.supabase.client.rpc("get_sankey_flow_data",{start_date:e?.startDate||"1900-01-01",end_date:e?.endDate||"2100-12-31",payment_type_ids:e?.paymentTypeIds?.length?e.paymentTypeIds:null,income_category_ids:e?.incomeCategoryIds?.length?e.incomeCategoryIds:null,expense_category_ids:e?.expenseCategoryIds?.length?e.expenseCategoryIds:null});if(a)return console.error("Error fetching Sankey flow data:",a),this.getEmptySankeyData();let s=t;if(!s||s.length===0)return this.getEmptySankeyData();let n=s.filter(c=>c.flow_type==="income_to_account"),r=s.filter(c=>c.flow_type==="account_to_expense"),l=new Map,h=new Map,m=new Map;n.forEach(c=>{l.set(c.source_name,c.source_color),h.set(c.target_name,c.target_color)}),r.forEach(c=>{h.set(c.source_name,c.source_color),m.set(c.target_name,c.target_color)});let d=Array.from(l.keys()),y=Array.from(h.keys()),f=Array.from(m.keys()),M=[...d,...y,...f],b=[...d.map(c=>l.get(c)||"#3ECF8E"),...y.map(c=>h.get(c)||"#3B82F6"),...f.map(c=>m.get(c)||"#EF4444")],x=new Map;d.forEach((c,_)=>x.set(`income::${c}`,_)),y.forEach((c,_)=>x.set(`account::${c}`,d.length+_)),f.forEach((c,_)=>x.set(`expense::${c}`,d.length+y.length+_));let v=[],w=[],S=[],E=[];return n.forEach(c=>{let _=x.get(`income::${c.source_name}`),F=x.get(`account::${c.target_name}`);if(_!==void 0&&F!==void 0){v.push(_),w.push(F),S.push(c.total_amount);let A=c.source_color||"#3ECF8E";E.push(this.hexToRgba(A,.4))}}),r.forEach(c=>{let _=x.get(`account::${c.source_name}`),F=x.get(`expense::${c.target_name}`);if(_!==void 0&&F!==void 0){v.push(_),w.push(F),S.push(c.total_amount);let A=c.target_color||"#EF4444";E.push(this.hexToRgba(A,.4))}}),{node:{label:M,color:b,pad:15,thickness:20},link:{source:v,target:w,value:S,color:E},type:"sankey"}}catch(t){return console.error("Error processing Sankey data:",t),this.getEmptySankeyData()}}getEmptySankeyData(){return{node:{label:[],color:[],pad:15,thickness:20},link:{source:[],target:[],value:[],color:[]},type:"sankey"}}hexToRgba(e,t){let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!a)return`rgba(128, 128, 128, ${t})`;let s=parseInt(a[1],16),n=parseInt(a[2],16),r=parseInt(a[3],16);return`rgba(${s}, ${n}, ${r}, ${t})`}static \u0275fac=function(t){return new(t||g)(ee(de))};static \u0275prov=X({token:g,factory:g.\u0275fac,providedIn:"root"})};var ke=()=>({width:"100%",height:"600px"}),Oe=()=>({responsive:!0,displayModeBar:!1});function Te(g,e){g&1&&(o(0,"div",9)(1,"div",10),C(2,"div",11),o(3,"p",12),u(4,"Loading dashboard..."),i()()())}function Ie(g,e){if(g&1&&(o(0,"div",50)(1,"div",51),u(2),C(3,"div",52),i()()),g&2){let t=e.$implicit,a=P(2);T("background",t.color||"#71717a")("width",a.stats.totalIncomes>0?t.value/a.stats.totalIncomes*100:0,"%"),p(2),V(" ",t.name,": ",a.formatCurrency(t.value)," ")}}function Pe(g,e){if(g&1&&(o(0,"div",50)(1,"div",51),u(2),C(3,"div",52),i()()),g&2){let t=e.$implicit,a=P(2);T("background",t.color||"#71717a")("width",a.stats.totalExpenses>0?t.value/a.stats.totalExpenses*100:0,"%"),p(2),V(" ",t.name,": ",a.formatCurrency(t.value)," ")}}function Fe(g,e){if(g&1&&C(0,"span",65),g&2){let t=P().$implicit;T("background",t.color)}}function Ae(g,e){if(g&1&&(o(0,"tr",60)(1,"td",61),u(2),i(),o(3,"td",62),k(4,Fe,1,2,"span",63),u(5),i(),o(6,"td",62),u(7),i(),o(8,"td",64),u(9),i()()),g&2){let t=e.$implicit,a=P(3);p(2),I(" ",t.name," "),p(2),D("ngIf",t.color),p(),I(" ",t.category||"-"," "),p(2),I(" ",a.formatDate(t.date)," "),p(2),I(" -",a.formatCurrency(t.amount)," ")}}function Re(g,e){if(g&1&&(o(0,"div",38)(1,"div",39)(2,"h4",40),u(3,"Top 5 Highest Expenses"),i()(),o(4,"div",53)(5,"table",54)(6,"thead",55)(7,"tr")(8,"th",56),u(9," Description "),i(),o(10,"th",56),u(11," Category "),i(),o(12,"th",56),u(13," Date "),i(),o(14,"th",57),u(15," Amount "),i()()(),o(16,"tbody",58),k(17,Ae,10,5,"tr",59),i()()()()),g&2){let t=P(2);p(17),D("ngForOf",t.topExpenses)}}function Le(g,e){if(g&1&&C(0,"plotly-plot",66),g&2){let t=P(2);oe(Z(5,ke)),D("data",t.sankeyChartData)("layout",t.sankeyChartLayout)("config",Z(6,Oe))}}function Be(g,e){g&1&&(o(0,"div",67)(1,"p"),u(2,"No data available for the selected period and filters"),i()())}function He(g,e){if(g&1&&(o(0,"div")(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),B(),o(6,"svg",18),C(7,"path",19),i()(),H(),o(8,"div",20)(9,"dl")(10,"dt",21),u(11,"Total Incomes"),i(),o(12,"dd")(13,"div",22),u(14),i()()()()(),o(15,"div",5)(16,"div",23)(17,"span"),u(18,"Accounts"),i(),o(19,"span"),u(20),i()(),o(21,"div",24),k(22,Ie,4,6,"div",25),i()()()(),o(23,"div",14)(24,"div",15)(25,"div",16)(26,"div",17),B(),o(27,"svg",26),C(28,"path",27),i()(),H(),o(29,"div",20)(30,"dl")(31,"dt",21),u(32,"Total Expenses"),i(),o(33,"dd")(34,"div",28),u(35),i()()()()(),o(36,"div",5)(37,"div",23)(38,"span"),u(39,"Accounts"),i(),o(40,"span"),u(41),i()(),o(42,"div",24),k(43,Pe,4,6,"div",25),i()()()(),o(44,"div",14)(45,"div",15)(46,"div",16)(47,"div",17),B(),o(48,"svg",29),C(49,"path",30),i()(),H(),o(50,"div",20)(51,"dl")(52,"dt",21),u(53,"Balance"),i(),o(54,"dd")(55,"div",31),u(56),i()()()()(),o(57,"div",5)(58,"div",32)(59,"div",33),u(60,"Savings Rate"),i(),o(61,"div",34),u(62),i()(),o(63,"div",35),C(64,"div",36),i()()()()(),k(65,Re,18,1,"div",37),o(66,"div",38)(67,"div",39)(68,"h4",40),u(69,"Incomes vs Expenses"),i()(),o(70,"div",15),C(71,"apx-chart",41),i()(),o(72,"div",38)(73,"div",39)(74,"h4",40),u(75,"Expenses by category"),i()(),o(76,"div",42),C(77,"apx-chart",43),i()(),o(78,"div",38)(79,"div",39)(80,"h4",40),u(81,"Money Flow"),i(),o(82,"p",44),u(83,"Income Categories \u2192 Accounts \u2192 Expense Categories"),i()(),o(84,"div",15),k(85,Le,1,7,"plotly-plot",45)(86,Be,3,0,"div",46),i()(),o(87,"div",47)(88,"div",14)(89,"div",39)(90,"h4",48),u(91,"Expenses by category"),i()(),o(92,"div",15),C(93,"apx-chart",49),i()(),o(94,"div",14)(95,"div",39)(96,"h4",48),u(97,"Expenses by account"),i()(),o(98,"div",15),C(99,"apx-chart",49),i()(),o(100,"div",14)(101,"div",39)(102,"h4",48),u(103,"Incomes by account"),i()(),o(104,"div",15),C(105,"apx-chart",49),i()()()()),g&2){let t=P();p(14),I(" ",t.formatCurrency(t.stats.totalIncomes)," "),p(6),I("",t.incomesPaymentTypes.length," accounts"),p(2),D("ngForOf",t.incomesPaymentTypes),p(13),I(" ",t.formatCurrency(t.stats.totalExpenses)," "),p(6),I("",t.expensesPaymentTypes.length," accounts"),p(2),D("ngForOf",t.expensesPaymentTypes),p(5),j("text-brand",t.stats.balance>=0)("text-red-500",t.stats.balance<0),p(7),j("text-brand",t.stats.balance>=0)("text-red-500",t.stats.balance<0),p(),I(" ",t.formatCurrency(t.stats.balance)," "),p(5),j("text-brand",t.stats.savingsPercentage>=0)("text-red-500",t.stats.savingsPercentage<0),p(),V(" ",t.stats.savingsPercentage>=0?"+":"","",t.stats.savingsPercentage.toFixed(1),"% "),p(2),T("width",t.Math.max(0,t.Math.min(100,t.stats.savingsPercentage)),"%"),j("bg-brand",t.stats.savingsPercentage>=0)("bg-red-500",t.stats.savingsPercentage<0),p(),D("ngIf",t.topExpenses.length>0),p(6),D("series",t.lineChartOptions.series)("chart",t.lineChartOptions.chart)("dataLabels",t.lineChartOptions.dataLabels)("stroke",t.lineChartOptions.stroke)("fill",t.lineChartOptions.fill)("xaxis",t.lineChartOptions.xaxis)("yaxis",t.lineChartOptions.yaxis)("grid",t.lineChartOptions.grid)("legend",t.lineChartOptions.legend)("tooltip",t.lineChartOptions.tooltip)("theme",t.lineChartOptions.theme),p(6),D("series",t.stackedBarChartOptions.series)("chart",t.stackedBarChartOptions.chart)("plotOptions",t.stackedBarChartOptions.plotOptions)("dataLabels",t.stackedBarChartOptions.dataLabels)("xaxis",t.stackedBarChartOptions.xaxis)("yaxis",t.stackedBarChartOptions.yaxis)("grid",t.stackedBarChartOptions.grid)("legend",t.stackedBarChartOptions.legend)("fill",t.stackedBarChartOptions.fill)("tooltip",t.stackedBarChartOptions.tooltip)("theme",t.stackedBarChartOptions.theme),p(8),D("ngIf",t.sankeyChartData&&t.sankeyChartLayout),p(),D("ngIf",!t.sankeyChartData||(t.sankeyChartData[0]==null||t.sankeyChartData[0].node==null||t.sankeyChartData[0].node.label==null?null:t.sankeyChartData[0].node.label.length)===0),p(7),D("series",t.expensesCategoryChartOptions.series)("chart",t.expensesCategoryChartOptions.chart)("labels",t.expensesCategoryChartOptions.labels)("colors",t.expensesCategoryChartOptions.colors)("dataLabels",t.expensesCategoryChartOptions.dataLabels)("plotOptions",t.expensesCategoryChartOptions.plotOptions)("legend",t.expensesCategoryChartOptions.legend)("tooltip",t.expensesCategoryChartOptions.tooltip)("theme",t.expensesCategoryChartOptions.theme)("states",t.expensesCategoryChartOptions.states)("stroke",t.expensesCategoryChartOptions.stroke),p(6),D("series",t.expensesAccountChartOptions.series)("chart",t.expensesAccountChartOptions.chart)("labels",t.expensesAccountChartOptions.labels)("colors",t.expensesAccountChartOptions.colors)("dataLabels",t.expensesAccountChartOptions.dataLabels)("plotOptions",t.expensesAccountChartOptions.plotOptions)("legend",t.expensesAccountChartOptions.legend)("tooltip",t.expensesAccountChartOptions.tooltip)("theme",t.expensesAccountChartOptions.theme)("states",t.expensesAccountChartOptions.states)("stroke",t.expensesCategoryChartOptions.stroke),p(6),D("series",t.incomesAccountChartOptions.series)("chart",t.incomesAccountChartOptions.chart)("labels",t.incomesAccountChartOptions.labels)("colors",t.incomesAccountChartOptions.colors)("dataLabels",t.incomesAccountChartOptions.dataLabels)("plotOptions",t.incomesAccountChartOptions.plotOptions)("legend",t.incomesAccountChartOptions.legend)("tooltip",t.incomesAccountChartOptions.tooltip)("theme",t.incomesAccountChartOptions.theme)("states",t.incomesAccountChartOptions.states)("stroke",t.expensesCategoryChartOptions.stroke)}}var _e=class g{constructor(e,t,a,s){this.dashboardService=e;this.financeService=t;this.ngZone=a;this.cdr=s;this.initializeChartDefaults()}isLoading=!0;stats={totalIncomes:0,totalExpenses:0,balance:0,savingsPercentage:0,period:""};topExpenses=[];incomesPaymentTypes=[];expensesPaymentTypes=[];lineChartOptions;stackedBarChartOptions;expensesCategoryChartOptions;expensesAccountChartOptions;incomesAccountChartOptions;sankeyChartData;sankeyChartLayout;selectedPeriod="current-month";selectedPaymentTypes=[];selectedExpenseCategories=[];selectedIncomeCategories=[];paymentTypes=[];expenseCategories=[];incomeCategories=[];periodOptions=[{value:"current-month",label:"Current Month"},{value:"last-30-days",label:"Last 30 days"},{value:"last-6-months",label:"Last 6 months"},{value:"last-12-months",label:"Last 12 months"},{value:"all",label:"All"},{value:"custom",label:"Custom"}];timelineMinDate="2022-01-01";timelineMaxDate=new Date().toISOString().split("T")[0];customDateRange=null;Math=Math;instanceId=Math.random().toString(16).slice(2,8);timelineDebounceTimer=null;TIMELINE_DEBOUNCE_MS=500;pageHeaderService=te(De);async ngOnInit(){this.pageHeaderService.setHeader("Dashboard"),await this.loadFilterOptions(),await this.updateTimelineFromPeriod(),await this.loadDashboardData()}async loadFilterOptions(){try{let[e,t,a]=await Promise.all([this.financeService.getPaymentTypes(),this.financeService.getCategories(),this.financeService.getIncomeCategories()]);this.paymentTypes=e||[],this.expenseCategories=t||[],this.incomeCategories=a||[]}catch(e){console.error("Error loading filter options",e)}}async calculateDateRange(){let e=new Date,t=e.toISOString().slice(0,10),s=new Date(e.getFullYear(),e.getMonth()+1,1).toISOString().slice(0,10);switch(this.selectedPeriod){case"current-month":{let n=e.getFullYear(),r=e.getMonth()+1,l=new Date(n,e.getMonth()+1,0).getDate();return{startDate:`${n}-${String(r).padStart(2,"0")}-01`,endDate:`${n}-${String(r).padStart(2,"0")}-${String(l).padStart(2,"0")}`}}case"last-30-days":{let n=new Date(e);return n.setDate(n.getDate()-30),{startDate:n.toISOString().slice(0,10),endDate:t}}case"last-6-months":return{startDate:new Date(e.getFullYear(),e.getMonth()-5,1).toISOString().slice(0,10),endDate:s};case"last-12-months":return{startDate:new Date(e.getFullYear(),e.getMonth()-11,1).toISOString().slice(0,10),endDate:s};case"custom":{if(this.customDateRange)return{startDate:this.customDateRange.startDate,endDate:this.customDateRange.endDate};let n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);return{startDate:n.toISOString().slice(0,10),endDate:r.toISOString().slice(0,10)}}case"all":default:return{startDate:await this.getFirstTransactionDate()||void 0,endDate:s}}}async getFirstTransactionDate(){return await this.dashboardService.getFirstTransactionDate()}async buildFilters(){let e,t;if(this.customDateRange)e=this.customDateRange.startDate,t=this.customDateRange.endDate;else{let a=await this.calculateDateRange();e=a.startDate,t=a.endDate}return{startDate:e,endDate:t,paymentTypeIds:this.selectedPaymentTypes,expenseCategoryIds:this.selectedExpenseCategories,incomeCategoryIds:this.selectedIncomeCategories}}async onPeriodChange(e){this.selectedPeriod=e,this.selectedPeriod!=="custom"&&(this.customDateRange=null,await this.updateTimelineFromPeriod()),await this.loadDashboardData()}async onPaymentTypesChange(e){this.selectedPaymentTypes=e.map(t=>Number(t)),await this.loadDashboardData()}async onExpenseCategoriesChange(e){this.selectedExpenseCategories=e.map(t=>Number(t)),await this.loadDashboardData()}async onIncomeCategoriesChange(e){this.selectedIncomeCategories=e.map(t=>Number(t)),await this.loadDashboardData()}initializeChartDefaults(){this.lineChartOptions=this.createLineChartOptions([],[]),this.stackedBarChartOptions=this.createStackedBarOptions([],[]),this.expensesCategoryChartOptions=this.createPieChartOptions([],"Expenses by category"),this.expensesAccountChartOptions=this.createPieChartOptions([],"Expenses by account"),this.incomesAccountChartOptions=this.createPieChartOptions([],"Incomes by account")}async loadDashboardData(){this.isLoading=!0,console.info("[HomeComponent] loadDashboardData: start");try{let e=await this.buildFilters(),t=await Promise.allSettled([this.dashboardService.getDashboardStats(e),this.dashboardService.getIncomesVsExpenses(e),this.dashboardService.getExpensesByCategory(e),this.dashboardService.getExpensesByCategoryPerMonth(e),this.dashboardService.getExpensesByAccount(e),this.dashboardService.getIncomesByAccount(e),this.dashboardService.getTopExpenses(e),this.dashboardService.getSankeyFlowData(e)]),[a,s,n,r,l,h,m,d]=t,y=(c,_)=>c.status==="fulfilled"?c.value:(console.warn("[HomeComponent] dashboard load item failed",c.reason),_),f=y(a,{totalIncomes:0,totalExpenses:0,balance:0,savingsPercentage:0,period:""}),M=y(s,[]),b=y(n,[]),x=y(r,{categories:[],series:[],months:[]}),v=y(l,[]),w=y(h,[]),S=y(m,[]),E=y(d,{node:{label:[],color:[],pad:15,thickness:20},link:{source:[],target:[],value:[],color:[]},type:"sankey"});this.ngZone.run(()=>{this.stats=f,this.topExpenses=S,this.expensesPaymentTypes=v,this.incomesPaymentTypes=w,this.lineChartOptions=this.createLineChartOptions(M,M.map(c=>c.month)),this.stackedBarChartOptions=this.createStackedBarOptions(x.series,x.months),this.expensesCategoryChartOptions=this.createPieChartOptions(b,"Expenses by category"),this.expensesAccountChartOptions=this.createPieChartOptions(v,"Expenses by account"),this.incomesAccountChartOptions=this.createPieChartOptions(w,"Incomes by account"),console.log("[HomeComponent] Sankey data received:",E),this.createSankeyChart(E),console.log("[HomeComponent] Sankey chart created:",{hasData:!!this.sankeyChartData,hasLayout:!!this.sankeyChartLayout,nodeCount:this.sankeyChartData?.[0]?.node?.label?.length||0}),this.cdr.detectChanges()})}catch(e){console.error("Error loading dashboard data:",e)}finally{this.ngZone.run(()=>{this.isLoading=!1,this.cdr.detectChanges()}),console.info("[HomeComponent] loadDashboardData: end")}}createLineChartOptions(e,t){let a=e.map(n=>n.incomes||0),s=e.map(n=>n.expenses||0);return{series:[{name:"Incomes",data:a,color:"#3ECF8E"},{name:"Expenses",data:s,color:"#ef4444"}],chart:{type:"area",height:350,background:"transparent",toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,90,100]}},xaxis:{categories:t,labels:{style:{colors:"#a1a1aa",fontSize:"12px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#a1a1aa",fontSize:"12px"},formatter:n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n)}},grid:{borderColor:"#2a2a2a",strokeDashArray:4,xaxis:{lines:{show:!1}}},legend:{position:"top",horizontalAlign:"right",labels:{colors:"#e4e4e7"},markers:{size:6,strokeWidth:0}},tooltip:{theme:"dark",y:{formatter:n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(n)}},theme:{mode:"dark"}}}createStackedBarOptions(e,t){return{series:e.map(s=>L(R({},s),{data:s.data.map(n=>n),color:s.color})),chart:{type:"bar",height:400,stacked:!0,background:"transparent",toolbar:{show:!1},foreColor:"#a1a1aa"},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4,dataLabels:{position:"top"}}},fill:{opacity:.5},dataLabels:{enabled:!1},xaxis:{categories:t,labels:{style:{colors:"#a1a1aa",fontSize:"12px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#a1a1aa",fontSize:"12px"},formatter:s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}},grid:{borderColor:"#2a2a2a",strokeDashArray:4,xaxis:{lines:{show:!1}}},legend:{position:"top",horizontalAlign:"left",labels:{colors:"#e4e4e7"},markers:{width:10,height:10,radius:5,shape:"circle",strokeWidth:0}},tooltip:{theme:"dark",y:{formatter:s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(s)}},theme:{mode:"dark"}}}hexToRgba(e,t){let a=e.replace("#",""),s=parseInt(a.substring(0,2),16),n=parseInt(a.substring(2,4),16),r=parseInt(a.substring(4,6),16);return`rgba(${s}, ${n}, ${r}, ${t})`}createPieChartOptions(e,t){let a=e.map(l=>l.value),s=e.map(l=>l.name),n=e.map(l=>l.color),r=n.length>0?n.map(l=>this.hexToRgba(l,.5)):[this.hexToRgba("#71717a",.5)];return{series:a.length>0?a:[1],chart:{type:"donut",height:320,background:"transparent"},labels:s.length>0?s:["No data"],colors:r,dataLabels:{enabled:!1},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,label:"Total",fontSize:"14px",color:"#a1a1aa",formatter:l=>{let h=l.globals.seriesTotals.reduce((m,d)=>m+d,0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(h)}},value:{show:!0,fontSize:"20px",color:"#e4e4e7",fontWeight:600}}}}},stroke:{show:!1,width:0,colors:["transparent"]},legend:{position:"bottom",labels:{colors:"#e4e4e7"},markers:{size:6,strokeWidth:0}},tooltip:{theme:"dark",y:{formatter:l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(l)}},theme:{mode:"dark"},states:{hover:{filter:{type:"lighten",value:.1}}}}}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}createSankeyChart(e){this.sankeyChartData=[{type:"sankey",orientation:"h",node:{pad:e.node.pad,thickness:e.node.thickness,line:{color:"rgba(255, 255, 255, 0.1)",width:.5},label:e.node.label,color:e.node.color},link:{source:e.link.source,target:e.link.target,value:e.link.value,color:e.link.color}}],this.sankeyChartLayout={title:{font:{size:16,color:"#ffffff",family:"Inter, system-ui, sans-serif"}},font:{size:11,color:"#a1a1aa",family:"Inter, system-ui, sans-serif"},paper_bgcolor:"transparent",plot_bgcolor:"transparent",height:600,margin:{l:20,r:20,t:60,b:20}}}async onDateRangeChange(e){this.customDateRange=e,console.log("Custom date range selected:",e),e&&this.selectedPeriod!=="custom"&&(this.selectedPeriod="custom"),this.timelineDebounceTimer&&clearTimeout(this.timelineDebounceTimer),this.timelineDebounceTimer=setTimeout(async()=>{await this.loadDashboardData(),this.timelineDebounceTimer=null},this.TIMELINE_DEBOUNCE_MS)}async updateTimelineFromPeriod(){let{startDate:e,endDate:t}=await this.calculateDateRange();e&&t&&(this.customDateRange={startDate:e,endDate:t})}static \u0275fac=function(t){return new(t||g)(U(G),U(be),U(ae),U(re))};static \u0275cmp=Y({type:g,selectors:[["app-home"]],decls:15,vars:21,consts:[[1,"space-y-6","p-6"],[1,"bg-background-card","border","border-sidebar-border","rounded-lg","p-4","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["bgColor","bg-dark-blue",3,"ngModelChange","selectionChange","options","label","placeholder","ngModel"],[3,"ngModelChange","selectionChange","options","label","placeholder","ngModel"],[1,"mt-4","pt-4","border-t","border-sidebar-border"],[3,"ngModelChange","rangeChange","minDate","maxDate","ngModel"],["class","flex items-center justify-center py-12",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"text-center"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-brand"],[1,"mt-2","text-sm","text-slate-400"],[1,"grid","grid-cols-1","gap-5","sm:grid-cols-2","lg:grid-cols-3","mb-6"],[1,"overflow-hidden","rounded-lg","bg-background-card","shadow","border","border-sidebar-border"],[1,"p-5"],[1,"flex","items-center"],[1,"flex-shrink-0"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-brand"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 11l5-5m0 0l5 5m-5-5v12"],[1,"ml-5","w-0","flex-1"],[1,"truncate","text-sm","font-medium","text-slate-400"],[1,"text-lg","font-semibold","text-brand"],[1,"flex","items-center","justify-between","text-sm","text-slate-400","mb-2"],[1,"flex","items-center","space-x-1","relative"],["class","flex-1 h-2 rounded-full relative group",3,"background","width",4,"ngFor","ngForOf"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 13l-5 5m0 0l-5-5m5 5V6"],[1,"text-lg","font-semibold","text-red-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-semibold"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-slate-400"],[1,"text-sm","font-semibold"],[1,"mt-2","w-full","bg-slate-700","rounded-full","h-2"],[1,"h-2","rounded-full"],["class","mb-6 overflow-hidden rounded-lg bg-background-card shadow border border-sidebar-border",4,"ngIf"],[1,"mb-6","overflow-hidden","rounded-lg","bg-background-card","shadow","border","border-sidebar-border"],[1,"px-5","py-4","border-b","border-sidebar-border"],[1,"text-base","font-semibold","text-white"],[3,"series","chart","dataLabels","stroke","fill","xaxis","yaxis","grid","legend","tooltip","theme"],[1,"p-5","stacked-bar-chart-container"],[3,"series","chart","plotOptions","dataLabels","xaxis","yaxis","grid","legend","fill","tooltip","theme"],[1,"mt-1","text-xs","text-slate-400"],[3,"data","layout","config","style",4,"ngIf"],["class","flex items-center justify-center h-96 text-slate-400",4,"ngIf"],[1,"grid","grid-cols-1","gap-5","lg:grid-cols-3"],[1,"text-sm","font-semibold","text-white"],[3,"series","chart","labels","colors","dataLabels","plotOptions","legend","tooltip","theme","states","stroke"],[1,"flex-1","h-2","rounded-full","relative","group"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-2","px-2","py-1","bg-slate-800","text-white","text-xs","rounded","opacity-0","group-hover:opacity-100","transition-opacity","whitespace-nowrap","z-10"],[1,"absolute","top-full","left-1/2","transform","-translate-x-1/2","w-0","h-0","border-l-4","border-r-4","border-t-4","border-transparent","border-t-slate-800"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-sidebar-border"],[1,""],["scope","col",1,"px-5","py-3","text-left","text-xs","font-medium","text-slate-400","uppercase","tracking-wider"],["scope","col",1,"px-5","py-3","text-right","text-xs","font-medium","text-slate-400","uppercase","tracking-wider"],[1,"divide-y","divide-sidebar-border"],["class","hover:bg-slate-900/30",4,"ngFor","ngForOf"],[1,"hover:bg-slate-900/30"],[1,"px-5","py-4","whitespace-nowrap","text-sm","font-medium","text-white"],[1,"px-5","py-4","whitespace-nowrap","text-sm","text-slate-400"],["class","inline-block h-3 w-3 rounded-full mr-2",3,"background",4,"ngIf"],[1,"px-5","py-4","whitespace-nowrap","text-sm","text-right","font-semibold","text-red-500"],[1,"inline-block","h-3","w-3","rounded-full","mr-2"],[3,"data","layout","config"],[1,"flex","items-center","justify-center","h-96","text-slate-400"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"app-select",3),z("ngModelChange",function(n){return $(a.selectedPeriod,n)||(a.selectedPeriod=n),n}),O("selectionChange",function(n){return a.onPeriodChange(n)}),i()(),o(5,"div")(6,"app-multiselect",4),z("ngModelChange",function(n){return $(a.selectedPaymentTypes,n)||(a.selectedPaymentTypes=n),n}),O("selectionChange",function(n){return a.onPaymentTypesChange(n)}),i()(),o(7,"div")(8,"app-multiselect",4),z("ngModelChange",function(n){return $(a.selectedExpenseCategories,n)||(a.selectedExpenseCategories=n),n}),O("selectionChange",function(n){return a.onExpenseCategoriesChange(n)}),i()(),o(9,"div")(10,"app-multiselect",4),z("ngModelChange",function(n){return $(a.selectedIncomeCategories,n)||(a.selectedIncomeCategories=n),n}),O("selectionChange",function(n){return a.onIncomeCategoriesChange(n)}),i()()(),o(11,"div",5)(12,"app-date-range-timeline",6),z("ngModelChange",function(n){return $(a.customDateRange,n)||(a.customDateRange=n),n}),O("rangeChange",function(n){return a.onDateRangeChange(n)}),i()()(),k(13,Te,5,0,"div",7)(14,He,106,85,"div",8),i()),t&2&&(p(4),D("options",a.periodOptions)("label","Period")("placeholder","Select period..."),N("ngModel",a.selectedPeriod),p(2),D("options",a.paymentTypes)("label","Accounts")("placeholder","Select accounts..."),N("ngModel",a.selectedPaymentTypes),p(2),D("options",a.expenseCategories)("label","Expense categories")("placeholder","Select categories..."),N("ngModel",a.selectedExpenseCategories),p(2),D("options",a.incomeCategories)("label","Income categories")("placeholder","Select income categories..."),N("ngModel",a.selectedIncomeCategories),p(2),D("minDate",a.timelineMinDate)("maxDate",a.timelineMaxDate),N("ngModel",a.customDateRange),p(),D("ngIf",a.isLoading),p(),D("ngIf",!a.isLoading))},dependencies:[J,K,ce,Ce,fe,me,le,xe,ye,ue,ge,he,Q],styles:["[_nghost-%COMP%]{display:block}"]})};export{_e as HomeComponent};
