import{a as K,b as W}from"./chunk-2HBCDZHR.js";import{d as Q}from"./chunk-JIVE73B3.js";import"./chunk-UTADPVO5.js";import{a as J}from"./chunk-ZB4FMHFC.js";import{a as R}from"./chunk-ERIPXJJI.js";import{a as U}from"./chunk-D3455EOI.js";import{a as G}from"./chunk-SOJVCRDF.js";import{a as q}from"./chunk-SWEM3K6L.js";import{r as $}from"./chunk-XYDAMM6N.js";import{Db as A,Ha as y,Kb as H,La as P,Mb as S,Pa as v,Q as C,Rb as N,Va as d,W as p,Wa as n,X as g,Xa as o,Y as h,Ya as _,Z as b,bc as j,cc as O,db as w,dc as B,eb as u,gb as c,ha as f,kb as k,kc as F,lb as L,mb as z,qb as V,rb as D,ub as m,vb as I,wb as T,xb as M,ya as a,yb as E}from"./chunk-TKY7A7V6.js";import"./chunk-VOSPIT4N.js";var Y=["headerActions"],Z=()=>[];function ee(r,t){if(r&1){let e=w();n(0,"button",15),u("click",function(){p(e);let s=c();return g(s.openAddDialog())}),h(),n(1,"svg",16),_(2,"path",17),o(),b(),n(3,"span",18),m(4,"Add List"),o()()}}function te(r,t){r&1&&(n(0,"div",19),_(1,"div",20),o())}function ie(r,t){r&1&&(n(0,"div",21),h(),n(1,"svg",22),_(2,"path",23),o(),b(),n(3,"p",24),m(4,"No todo lists found"),o(),n(5,"p",25),m(6,"Start by creating your first todo list"),o()())}function ne(r,t){if(r&1&&(n(0,"p",50),m(1),o()),r&2){let e=c().$implicit;a(),T(" ",e.description," ")}}function oe(r,t){if(r&1&&(n(0,"span",51),m(1),o()),r&2){let e=c().$implicit,i=c(2);d("ngClass",i.getPriorityBadgeClass(e.priority)),a(),T(" ",i.getPriorityLabel(e.priority)," ")}}function re(r,t){if(r&1&&(n(0,"span",51),h(),n(1,"svg",52),_(2,"path",53),o(),m(3),o()),r&2){let e=c().$implicit,i=c(2);d("ngClass",i.getDueDateBadgeClass(e.due_date)),a(3),T(" ",i.getDueDateLabel(e.due_date)," ")}}function se(r,t){if(r&1){let e=w();n(0,"div",28),u("click",function(){let s=p(e).$implicit,l=c(2);return g(l.openListDetail(s))}),n(1,"div",29)(2,"div",30)(3,"h3",31),m(4),o(),n(5,"div",32)(6,"button",33),u("click",function(s){let l=p(e).$implicit,x=c(2);return g(x.openEditDialog(l,s))}),h(),n(7,"svg",34),_(8,"path",35),o()(),b(),n(9,"button",36),u("click",function(s){let l=p(e).$implicit,x=c(2);return g(x.confirmDelete(l,s))}),h(),n(10,"svg",34),_(11,"path",37),o()()()(),v(12,ne,2,1,"p",38),b(),n(13,"div",39),v(14,oe,2,2,"span",40)(15,re,4,2,"span",40),o(),n(16,"div",41)(17,"div",42)(18,"span",43),m(19,"Tasks Progress"),o(),n(20,"span",44),m(21),o()(),n(22,"div",45),_(23,"div",46),o(),n(24,"div",47),m(25),o()(),n(26,"div",48)(27,"div",49)(28,"span"),m(29,"Created"),o(),n(30,"span"),m(31),o()()()()()}if(r&2){let e=t.$implicit,i=c(2);a(4),T(" ",e.title," "),a(8),d("ngIf",e.description),a(2),d("ngIf",e.priority),a(),d("ngIf",e.due_date),a(6),M(" ",e.completedTasksCount||0," / ",e.totalTasksCount||0," "),a(2),V("width",i.getProgressPercentage(e),"%"),d("ngClass",i.getProgressBarColor(i.getProgressPercentage(e))),a(2),T(" ",i.getProgressPercentage(e),"% Complete "),a(6),I(i.formatDate(e.created_at))}}function ae(r,t){if(r&1&&(n(0,"div",26),v(1,se,32,11,"div",27),o()),r&2){let e=c();a(),d("ngForOf",e.todoLists())}}function le(r,t){if(r&1){let e=w();n(0,"button",61),u("click",function(){let s=p(e).index,l=c(2);return g(l.goToPage(s+1))}),m(1),o()}if(r&2){let e=t.index,i=c(2);D("bg-brand",i.currentPage()===e+1)("text-black",i.currentPage()===e+1)("font-medium",i.currentPage()===e+1)("bg-zinc-800",i.currentPage()!==e+1)("text-zinc-300",i.currentPage()!==e+1),a(),T(" ",e+1," ")}}function de(r,t){if(r&1){let e=w();n(0,"div",54)(1,"div",55),m(2),o(),n(3,"div",32)(4,"button",56),u("click",function(){p(e);let s=c();return g(s.prevPage())}),h(),n(5,"svg",34),_(6,"path",57),o()(),b(),n(7,"div",58),v(8,le,2,11,"button",59),o(),n(9,"button",56),u("click",function(){p(e);let s=c();return g(s.nextPage())}),h(),n(10,"svg",34),_(11,"path",60),o()()()()}if(r&2){let e=c();a(2),E(" Showing ",e.startItem()," to ",e.endItem()," of ",e.totalLists()," todo lists "),a(2),D("border-zinc-700",e.currentPage()!==1)("border-zinc-800",e.currentPage()===1),d("disabled",e.currentPage()===1),a(4),d("ngForOf",A(14,Z).constructor(e.totalPages())),a(),D("border-zinc-700",e.currentPage()!==e.totalPages())("border-zinc-800",e.currentPage()===e.totalPages()),d("disabled",e.currentPage()===e.totalPages())}}function ce(r,t){if(r&1){let e=w();n(0,"app-add-todo-list-dialog",62),u("close",function(){p(e);let s=c();return g(s.closeAddDialog())})("save",function(){p(e);let s=c();return g(s.onSaveDialog())}),o()}if(r&2){let e=c();d("todoList",e.editingList())}}var X=class r{constructor(t,e,i){this.todosService=t;this.notificationService=e;this.cdr=i}headerActionsTemplate;pageHeaderService=C(q);pageHeaderActionsService=C(U);router=C(Q);todoLists=f([]);searchQuery=f("");selectedPriority=f(null);currentPage=f(1);pageSize=12;totalLists=f(0);loading=f(!1);showAddDialog=f(!1);showDeleteConfirmation=f(!1);editingList=f(null);listToDelete=f(null);totalPages=S(()=>Math.ceil(this.totalLists()/this.pageSize));startItem=S(()=>(this.currentPage()-1)*this.pageSize+1);endItem=S(()=>Math.min(this.currentPage()*this.pageSize,this.totalLists()));priorityOptions=[{value:null,label:"All Priorities"},{value:"high",label:"High Priority"},{value:"medium",label:"Medium Priority"},{value:"low",label:"Low Priority"}];ngOnInit(){this.pageHeaderService.setHeader("Todo Lists"),this.loadLists()}ngAfterViewInit(){this.pageHeaderActionsService.setActions(this.headerActionsTemplate),this.cdr.detectChanges()}ngOnDestroy(){this.pageHeaderActionsService.clearActions()}async loadLists(){this.loading.set(!0);let{lists:t,total:e}=await this.todosService.getLists({search:this.searchQuery()||void 0,priority:this.selectedPriority(),page:this.currentPage(),pageSize:this.pageSize});this.todoLists.set(t),this.totalLists.set(e),this.loading.set(!1),this.cdr.detectChanges()}onSearchChange(t){let e=t.target.value;this.searchQuery.set(e),this.currentPage.set(1),this.loadLists()}onPriorityChange(t){this.selectedPriority.set(t==="all"?null:t),this.currentPage.set(1),this.loadLists()}openAddDialog(){this.editingList.set(null),this.showAddDialog.set(!0)}openEditDialog(t,e){e.stopPropagation(),this.editingList.set(t),this.showAddDialog.set(!0)}closeAddDialog(){this.showAddDialog.set(!1),this.editingList.set(null)}onSaveDialog(){this.loadLists()}confirmDelete(t,e){e.stopPropagation(),this.listToDelete.set(t),this.showDeleteConfirmation.set(!0)}async onDeleteConfirmed(){let t=this.listToDelete();if(!t)return;await this.todosService.deleteList(t.id)?(this.notificationService.success("Todo list deleted successfully"),this.loadLists()):this.notificationService.error("Failed to delete todo list"),this.showDeleteConfirmation.set(!1),this.listToDelete.set(null)}onDeleteCancelled(){this.showDeleteConfirmation.set(!1),this.listToDelete.set(null)}openListDetail(t){this.router.navigate(["/todos",t.id])}goToPage(t){this.currentPage.set(t),this.loadLists()}nextPage(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.loadLists())}prevPage(){this.currentPage()>1&&(this.currentPage.update(t=>t-1),this.loadLists())}getPriorityBadgeClass(t){switch(t){case"high":return"bg-red-500/20 text-red-400 border-red-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"low":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-zinc-800 text-zinc-400 border-zinc-700"}}getPriorityLabel(t){return t?t.charAt(0).toUpperCase()+t.slice(1):"No Priority"}getDueDateBadgeClass(t){if(!t)return"";let e=new Date;e.setHours(0,0,0,0);let i=new Date(t);i.setHours(0,0,0,0);let s=i.getTime()-e.getTime(),l=Math.ceil(s/(1e3*60*60*24));return l<0?"bg-red-500/20 text-red-400 border-red-500/30":l===0?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":l<=3?"bg-brand/20 text-brand border-brand/30":"bg-zinc-800 text-zinc-400 border-zinc-700"}getDueDateLabel(t){if(!t)return"";let e=new Date;e.setHours(0,0,0,0);let i=new Date(t);i.setHours(0,0,0,0);let s=i.getTime()-e.getTime(),l=Math.ceil(s/(1e3*60*60*24));return l<0?`Overdue ${Math.abs(l)}d`:l===0?"Due Today":l===1?"Due Tomorrow":l<=7?`Due in ${l}d`:i.toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"})}formatDate(t){return new Date(t).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}getProgressPercentage(t){return!t.totalTasksCount||t.totalTasksCount===0?0:Math.round(t.completedTasksCount/t.totalTasksCount*100)}getProgressBarColor(t){return t===100?"bg-green-500":t>=50?"bg-brand":t>0?"bg-yellow-500":"bg-zinc-700"}static \u0275fac=function(e){return new(e||r)(y(K),y(R),y(N))};static \u0275cmp=P({type:r,selectors:[["app-todos"]],viewQuery:function(e,i){if(e&1&&k(Y,5),e&2){let s;L(s=z())&&(i.headerActionsTemplate=s.first)}},decls:16,vars:14,consts:[["headerActions",""],[1,"h-full","overflow-y-auto"],[1,"p-6","space-y-6"],[1,"flex","flex-wrap","items-center","gap-3","bg-background-card/50","p-4","rounded-lg","border","border-zinc-800"],[1,"relative","flex-1","sm:flex-initial","sm:w-64"],["type","text","placeholder","Search todo lists...",1,"w-full","bg-zinc-950","border","border-zinc-700","rounded-lg","px-4","py-2.5","h-10","pl-10","text-sm","text-white","placeholder-zinc-500","focus:outline-none","focus:ring-2","focus:ring-brand","focus:border-transparent",3,"input","value"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","left-3","top-1/2","-translate-y-1/2","h-5","w-5","text-zinc-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["placeholder","Priority",1,"w-full","sm:w-48",3,"valueChange","options","value"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","flex flex-col items-center justify-center h-64 text-zinc-500",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",4,"ngIf"],["class","flex flex-col sm:flex-row items-center justify-between gap-4 mt-8 px-4 py-3 bg-background-card/50 rounded-lg border border-zinc-800",4,"ngIf"],[3,"todoList","close","save",4,"ngIf"],[3,"confirmed","cancelled","isOpen","title","message","confirmText","iconType","isDangerous"],[1,"flex","items-center","justify-center","gap-2","px-2","sm:px-4","py-2.5","h-10","text-sm","bg-brand","text-black","font-medium","rounded-lg","hover:bg-brand/90","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"hidden","sm:inline","whitespace-nowrap"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-brand"],[1,"flex","flex-col","items-center","justify-center","h-64","text-zinc-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-16","w-16","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"text-lg","font-medium","mb-2"],[1,"text-sm"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-background-card rounded-lg border border-zinc-800 hover:border-zinc-700 transition-all overflow-hidden group cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"bg-background-card","rounded-lg","border","border-zinc-800","hover:border-zinc-700","transition-all","overflow-hidden","group","cursor-pointer",3,"click"],[1,"p-5"],[1,"flex","items-start","justify-between","mb-3"],[1,"text-lg","font-semibold","text-white","group-hover:text-brand","transition-colors","flex-1","pr-2"],[1,"flex","items-center","gap-2"],["title","Edit",1,"text-zinc-400","hover:text-brand","transition-colors","p-1","rounded","hover:bg-zinc-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Delete",1,"text-zinc-400","hover:text-red-400","transition-colors","p-1","rounded","hover:bg-zinc-800",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["class","text-sm text-zinc-400 mb-4 line-clamp-2",4,"ngIf"],[1,"flex","flex-wrap","items-center","gap-2","mb-4"],["class","inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border",3,"ngClass",4,"ngIf"],[1,"space-y-2"],[1,"flex","items-center","justify-between","text-sm"],[1,"text-zinc-400"],[1,"text-zinc-300","font-medium"],[1,"h-2","bg-zinc-800","rounded-full","overflow-hidden"],[1,"h-full","transition-all","duration-300","rounded-full",3,"ngClass"],[1,"text-xs","text-zinc-500","text-right"],[1,"mt-4","pt-4","border-t","border-zinc-800"],[1,"flex","items-center","justify-between","text-xs","text-zinc-500"],[1,"text-sm","text-zinc-400","mb-4","line-clamp-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-medium","border",3,"ngClass"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-3","w-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","gap-4","mt-8","px-4","py-3","bg-background-card/50","rounded-lg","border","border-zinc-800"],[1,"text-sm","text-zinc-400"],[1,"px-3","py-2","rounded-lg","border","text-white","hover:bg-zinc-800","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","items-center","gap-1"],["class","px-3 py-1.5 min-w-[2.5rem] rounded-lg border border-zinc-700 hover:bg-zinc-700 transition-colors text-sm",3,"bg-brand","text-black","font-medium","bg-zinc-800","text-zinc-300","click",4,"ngFor","ngForOf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"px-3","py-1.5","min-w-[2.5rem]","rounded-lg","border","border-zinc-700","hover:bg-zinc-700","transition-colors","text-sm",3,"click"],[3,"close","save","todoList"]],template:function(e,i){if(e&1){let s=w();v(0,ee,5,0,"ng-template",null,0,H),n(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5),u("input",function(x){return p(s),g(i.onSearchChange(x))}),o(),h(),n(7,"svg",6),_(8,"path",7),o()(),b(),n(9,"app-select",8),u("valueChange",function(x){return p(s),g(i.onPriorityChange(x))}),o()(),v(10,te,2,0,"div",9)(11,ie,7,0,"div",10)(12,ae,2,1,"div",11)(13,de,12,15,"div",12),o()(),v(14,ce,1,1,"app-add-todo-list-dialog",13),n(15,"app-confirmation-dialog",14),u("confirmed",function(){return p(s),g(i.onDeleteConfirmed())})("cancelled",function(){return p(s),g(i.onDeleteCancelled())}),o()}if(e&2){let s;a(6),d("value",i.searchQuery()),a(3),d("options",i.priorityOptions)("value",i.selectedPriority()),a(),d("ngIf",i.loading()),a(),d("ngIf",!i.loading()&&i.todoLists().length===0),a(),d("ngIf",!i.loading()&&i.todoLists().length>0),a(),d("ngIf",!i.loading()&&i.todoLists().length>0&&i.totalPages()>1),a(),d("ngIf",i.showAddDialog()),a(),d("isOpen",i.showDeleteConfirmation())("title","Delete Todo List")("message",'Are you sure you want to delete "'+((s=i.listToDelete())==null?null:s.title)+'"? This will also delete all tasks in this list. This action cannot be undone.')("confirmText","Delete")("iconType","error")("isDangerous",!0)}},dependencies:[F,j,O,B,$,G,J,W],encapsulation:2})};export{X as TodosComponent};
